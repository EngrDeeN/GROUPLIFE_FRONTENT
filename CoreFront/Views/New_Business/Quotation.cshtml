@using Microsoft.Extensions.Configuration
@using Microsoft.Extensions.Configuration.Json
@inject IConfiguration Configuration

@{
    ViewData["Title"] = "Quotation";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script type="text/javascript" src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/json2/20130526/json2.min.js"></script>
<script>
    const app_host_API = @Json.Serialize(@Configuration.GetSection("Endpoint").GetSection("CORE_API_IP").Value);
    const api_port_API = @Json.Serialize(@Configuration.GetSection("Endpoint").GetSection("CORE_API_PNO").Value);
    const Result_API = (app_host_API + ":" + api_port_API);

    const app_host_Front = @Json.Serialize(@Configuration.GetSection("Endpoint").GetSection("CORE_FRONT_IP").Value);
    const api_port_Front = @Json.Serialize(@Configuration.GetSection("Endpoint").GetSection("CORE_FRONT_PNO").Value);
    const Result_Front = (app_host_Front + ":" + api_port_Front);

</script>
<script type="text/javascript">

    $(document).ready(function () {
        var now = new Date();
        var day = ("0" + now.getDate()).slice(-2);
        var month = ("0" + (now.getMonth() + 1)).slice(-2);
        var today = now.getFullYear() + "-" + (month) + "-" + (day);

        var oneYear = new Date();
        oneYear.setYear(now.getFullYear() + 1);
        let annual = oneYear.getFullYear() + "-" + (month) + "-" + (day - 1);

        var halfYear = new Date();
        var day = ("0" + halfYear.getDate()).slice(-2);
        var month = ("0" + (halfYear.getMonth() + 7)).slice(-2);
        let semi_annual = halfYear.getFullYear() + "-" + (month) + "-" + (day - 1);

        var quarterYear = new Date();
        var day = ("0" + halfYear.getDate()).slice(-2);
        var month = ("0" + (halfYear.getMonth() + 4)).slice(-2);
        let quarter_annual = quarterYear.getFullYear() + "-" + (month) + "-" + (day - 1);

        var monthDate = new Date();
        var day = ("0" + halfYear.getDate()).slice(-2);
        var month = ("0" + (halfYear.getMonth() + 2)).slice(-2);
        let monthly = monthDate.getFullYear() + "-" + (month) + "-" + (day - 1);

        $("#FGQH_PFREQ_FSCD_DID").change(function () {
            let quo_module = $("#FGQH_PFREQ_FSCD_DID").val()
            if (quo_module == 42) {
                $("#FGQH_QUOTATION_DATE")[0].setAttribute("value", today)
                $("#FGQH_QUOTATION_REQDATE")[0].setAttribute("value", annual)
                $("#FGQH_QUOTATCOMP_POLSTDATE")[0].setAttribute("value", today)
                $("#FGQH_QUOTATCOMP_POLENDATE")[0].setAttribute("value", annual)

            }
            else if (quo_module == 43) {
                $("#FGQH_QUOTATION_DATE")[0].setAttribute("value", today)
                $("#FGQH_QUOTATION_REQDATE")[0].setAttribute("value", semi_annual)
                $("#FGQH_QUOTATCOMP_POLSTDATE")[0].setAttribute("value", today)
                $("#FGQH_QUOTATCOMP_POLENDATE")[0].setAttribute("value", semi_annual)
            }
            else if (quo_module == 44) {
                $("#FGQH_QUOTATION_DATE")[0].setAttribute("value", today)
                $("#FGQH_QUOTATION_REQDATE")[0].setAttribute("value", quarter_annual)
                $("#FGQH_QUOTATCOMP_POLSTDATE")[0].setAttribute("value", today)
                $("#FGQH_QUOTATCOMP_POLENDATE")[0].setAttribute("value", quarter_annual)
            }
            else if (quo_module == 45) {
                $("#FGQH_QUOTATION_DATE")[0].setAttribute("value", today)
                $("#FGQH_QUOTATION_REQDATE")[0].setAttribute("value", monthly)
                $("#FGQH_QUOTATCOMP_POLSTDATE")[0].setAttribute("value", today)
                $("#FGQH_QUOTATCOMP_POLENDATE")[0].setAttribute("value", monthly)
            }
        })
    })

    function criteriaSelect(elemId, elemValue) {
        let criteria_Id = elemId.substring(21)
        var next = criteria_Id;
        let salary_amount = 'FGQG_NOOFSALARY_AMT' + next;
        let noOf_salary_amount = document.getElementById(salary_amount)
        let fixed = 'FGQG_FIXED_AMOUNT' + next;
        let fixed_amount = document.getElementById(fixed)
        let hct = 'FGQG_HEADCONT_TOTSALARY' + next;
        let hct_salary = document.getElementById(hct)

        if (elemValue == '2') {
            noOf_salary_amount.setAttribute('readOnly', true);
            hct_salary.setAttribute('readOnly', true);
            fixed_amount.removeAttribute('readOnly')

        }
        if (elemValue == '1') {
            fixed_amount.setAttribute('readOnly', true);
            noOf_salary_amount.removeAttribute('readOnly')
            hct_salary.removeAttribute('readOnly')
        }
        if (elemValue == '3') {
            fixed_amount.removeAttribute('readOnly');
            noOf_salary_amount.removeAttribute('readOnly')
            hct_salary.removeAttribute('readOnly')
        }

    }
</script>

<script type="text/javascript">
    $(document).ready(function () {
        $(document).on('click', 'button.form-control', function () {
            alert("Do you want to remove table Row");
            $(this).closest('tr').remove();
            return false;
        });
    });
</script>

<script type="text/javascript">
    var _FGQG_COMPGRP_ID = 0;
    $(document).ready(function () {
        $("#btnExport").on('click', function () {
            var employee_count = $('#FGQH_QUOTATION_TOTALEMP').val()
            var totalRowCount = 0;
            var rowCount = 0;
            var fileTable = document.getElementById("divPrint")
            var fileRows = fileTable.getElementsByTagName("tr")
            let cnicArray = [];
            for (var i = 0; i < fileRows.length; i++) {
                totalRowCount++;
                if (fileRows[i].getElementsByTagName("td").length > 0) {
                    rowCount++;
                }
            }
            for (let i = 0; i < (fileRows.length - 1); i++) {
                let cnicVal = "col'2_" + i + "'";
                let cnicID = document.getElementById(cnicVal).innerText;
                cnicArray.push(cnicID);
            }
            function if_duplicate_cnic() {
                for (let i = 0; i < cnicArray.length; i++) {
                    if (cnicArray[i] == cnicArray[i + 1]) {
                        let lineBreak = document.createElement("div");
                        lineBreak.innerText = 'Duplicated CNIC: ' + cnicArray[i]
                        lineBreak.classList.add("text-dark");
                        fileTable.prepend(lineBreak);
                        //fileTable.prepend('Duplicated CNIC: ' + cnicArray[i]);
                        return true;
                    }
                }
                return false;
            }
            if (if_duplicate_cnic(cnicArray)) {
                alert("Please Add different CNIC Number")
                return IsFormValid = false;
            };
            if (employee_count < rowCount || employee_count > rowCount) {
                alert("Please add data according to given employees")
                return false;
            }
            //if (employee_count == rowCount) {
            //    alert("File uploaded successfully")
            //    return true;
            //}

            var files = $('#fileupload').prop("files");
            var fileExtension = ['csv'];
            var filename = $('#fileupload').val();
            if (filename.length == 0) {
                alert("Please select a file.");
                return false;
            }
            else {
                var extension = filename.replace(/^.*\./, '');
                if ($.inArray(extension, fileExtension) == -1) {
                    alert("Please select only CVS files for Customer Uploading.");
                    return false;
                }
            }

            formData = new FormData();
            formData.append("fileupload", files[0]);

            var FSLO_LOCATION_ID = $('#FSLO_LOCATION_ID').find(":selected").attr('value');
            var FGQH_QUOTATHDR_ID_ = sessionStorage.getItem('FGQH_QUOTATHDR_ID');
            FGQH_QUOTATHDR_ID = $("#FGQH_QUOTATHDR_ID").val();

            if (FGQH_QUOTATHDR_ID != 0) {

                if (employee_count == rowCount) {

                    $.ajax({
                        type: 'POST',
                        url: "/New_Business/ExportGetPara?FSLO_LOCATION_ID=" + FSLO_LOCATION_ID + "&FGQH_QUOTATHDR_ID=" + FGQH_QUOTATHDR_ID + "",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        processData: true,
                        success: function (repo) {
                            alert("File is uploaded successfully");
                        },
                        error: function () {
                            alert("Error occurs");
                        }
                    });
                } else {
                    alse("Please add employee data according to given number of Employees!")
                    //alert("Total Emplyees Member Quantity not more than as provided in excel Data!");
                    $("#divPrint").empty();

                }
            } else {
                alert("You can save Bulk Data while you not selected Any Quotation Code");
            }

        });

    });
</script>
<script type="text/javascript">

    $(function () {
        $('#btnupload').on('click', function () {
            var fileExtension = ['csv'];

            var filename = $('#fileupload').val();
            if (filename.length == 0) {
                alert("Please select a file.");
                return false;
            }
            else {
                var extension = filename.replace(/^.*\./, '');
                if ($.inArray(extension, fileExtension) == -1) {
                    alert("Please select only CSV files for Customer Uploading.");
                    return false;
                }
            }
            var fdata = new FormData();
            var fileUpload = $("#fileupload").get(0);
            var files = fileUpload.files;

            fdata.append(files[0].name, files[0]);
            $.ajax({
                "async": false,
                "crossDomain": true,
                type: "POST",
                url: "/Home/ImportDataInGrid",
                beforeSend: function (xhr) {
                    xhr.setRequestHeader("XSRF-TOKEN",
                        $('input:hidden[name="__RequestVerificationToken"]').val());
                },
                data: fdata,
                contentType: false,
                processData: false,
                cache: false,
                success: function (response) {
                    if (response.length == 0)
                        alert('Some error occured while uploading');
                    else {
                        $('#divPrint').html(response);
                        var employee_count = $('#FGQH_QUOTATION_TOTALEMP').val()
                        var totalRowCount = 0;
                        var rowCount = 0;
                        var fileTable = document.getElementById("datatables-reponsive")
                        var fileRows = fileTable.getElementsByTagName("tr")
                        for (var i = 0; i < fileRows.length; i++) {
                            totalRowCount++;
                            if (fileRows[i].getElementsByTagName("td").length > 0) {
                                rowCount++;
                            }
                        }
                        fileTable.prepend('Total Rows:' + rowCount); @* added by maryam on 14 / 4 *@
                    }
                },
                error: function (e) {
                    $('#divPrint').html(e.responseText);
                }
            });
        })
    });


    $(document).ready(function () {
        $('#SaveQuotaEvent').click(function (e) {

            var table = document.getElementById("TableIdEvent");
            var rows = table.getElementsByTagName("tr")

            for (var p = 0; p < rows.length; p++) {
                // alert("Loop... EVENT.." + p);
                FSCE_COVREVENT_ID = $("#FSCE_COVREVENT_ID" + p).find(":selected").attr('value');
                FGQE_EVENTST_DATE = $("#FGQE_EVENTST_DATE" + p).val();
                FGQE_EVENTEN_DATE = $("#FGQE_EVENTEN_DATE" + p).val();
                FGQE_PFREQ_FSCD_DID = $("#FGQE_PFREQ_FSCD_DID" + p).find(":selected").attr('value');
                FGQE_PAYBLE_FLAG = $("#FGQE_PAYBLE_FLAG" + p).find(":selected").attr('value');
                FGQE_EVNT_CONTRIB = $("#FGQE_EVNT_CONTRIB" + p).val();
                FGQE_EVNT_LOADING = $("#FGQE_EVNT_LOADING" + p).val();
                FGQE_NET_CONTRIB = $("#FGQE_NET_CONTRIB" + p).val();
                FGQE_STATUS = $("#FGQE_STATUS" + p).find(":selected").attr('value');
                FGQH_QUOTATHDR_ID = $("#FGQH_QUOTATHDR_ID" + p).val();
                _FGQG_COMPGRP_ID = $("#_FGQG_COMPGRP_ID" + p).val();
                FGQE_QUOTEVNT_ID = $("#FGQE_QUOTEVNT_ID" + p).val();

                $.ajax({
                    "async": false,
                    "crossDomain": true,
                    type: 'POST',
                    url: "/New_Business/SaveQuotaEvent?FSCE_COVREVENT_ID=" + FSCE_COVREVENT_ID + "&_FGQG_COMPGRP_ID=" + _FGQG_COMPGRP_ID + "&FGQE_EVENTST_DATE=" + FGQE_EVENTST_DATE + "&FGQE_EVENTEN_DATE=" + FGQE_EVENTEN_DATE + "&FGQE_PFREQ_FSCD_DID=" + FGQE_PFREQ_FSCD_DID + "&FGQE_PAYBLE_FLAG=" + FGQE_PAYBLE_FLAG + "&FGQE_EVNT_CONTRIB=" + FGQE_EVNT_CONTRIB + "&FGQE_EVNT_LOADING=" + FGQE_EVNT_LOADING + "&FGQE_NET_CONTRIB=" + FGQE_NET_CONTRIB + "&FGQE_STATUS=" + FGQE_STATUS + "&FGQH_QUOTATHDR_ID=" + FGQH_QUOTATHDR_ID + "&FGQE_QUOTEVNT_ID=" + FGQE_QUOTEVNT_ID + "",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    processData: true,
                    success: function (repo) {
                        //alert("Event Successfully Saved");
                    },
                    error: function () {
                        // alert("Event coundn't Saved");
                    }
                });
            }
            //$('#AddEvent').modal('hide');
        });
    });

    $(document).ready(function () {
        $('#SaveQuotaRider').click(function (e) {
            var totalRowCount = 0;
            var rowCount = 0;

            var FSPM_PRODUCT_ID = 0;
            var FGQE_QUOTEVNT_ID = 0;
            var FGQR_RIDERST_DATE = 0;
            var FGQR_RIDEREN_DATE = 0;
            var FGQR_PFREQ_FSCD_DID = 0;
            var FGQR_PAYBLE_FLAG = 0;
            var FGQR_LOADING_TYPE = 0;
            var FGQR_LOADING_VALUE = 0;
            var FGQR_RIDER_CONTRIB = 0;
            var FGQR_NET_CONTRIB = 0;
            var FGQR_STATUS = 0;
            var FGQH_QUOTATHDR_ID = 0;

            var table = document.getElementById("TableIdRider");
            var rows = table.getElementsByTagName("tr")

            for (var o = 0; o < rows.length; o++) {
                //alert("Loop rider..." + o);
                FSPM_PRODUCT_ID = $("#FSPM_PRODUCT_ID" + o).find(":selected").attr('value');
                FGQE_QUOTEVNT_ID = $("#FGQE_QUOTEVNT_ID" + o).val();
                FGQR_RIDERST_DATE = $("#FGQR_RIDERST_DATE" + o).val();
                FGQR_RIDEREN_DATE = $("#FGQR_RIDERST_DATE" + o).val();
                FGQR_PFREQ_FSCD_DID = $("#FGQR_PFREQ_FSCD_DID" + o).find(":selected").attr('value');
                FGQR_PAYBLE_FLAG = $("#FGQR_PAYBLE_FLAG" + o).find(":selected").attr('value');
                FGQR_LOADING_TYPE = $("#FGQR_LOADING_TYPE" + o).val();
                FGQR_LOADING_VALUE = $("#FGQR_LOADING_VALUE" + o).val();
                FGQR_RIDER_CONTRIB = $("#FGQR_RIDER_CONTRIB" + o).val();
                FGQR_NET_CONTRIB = $("#FGQR_NET_CONTRIB" + o).val();
                FGQR_STATUS = $("#FGQR_STATUS" + o).find(":selected").attr('value');
                FGQH_QUOTATHDR_ID = $("#FGQH_QUOTATHDR_ID" + o).val();
                _FGQG_COMPGRP_ID = $("#_FGQG_COMPGRP_ID" + o).val();
                FGQR_QUOTRIDR_ID = $("#FGQR_QUOTRIDR_ID" + o).val();

                //alert(FSPM_PRODUCT_ID);
                //alert(FGQE_QUOTEVNT_ID);
                //alert(FGQR_RIDERST_DATE);
                //alert(FGQR_RIDEREN_DATE);
                //alert(FGQR_PFREQ_FSCD_DID);
                //alert(FGQR_PAYBLE_FLAG);
                //alert(FGQR_LOADING_TYPE);
                //alert(FGQR_LOADING_VALUE);
                //alert(FGQR_RIDER_CONTRIB);
                //alert(FGQR_NET_CONTRIB);
                //alert(FGQR_STATUS);
                //alert(FGQH_QUOTATHDR_ID);
                //alert(_FGQG_COMPGRP_ID);
                //alert(FGQR_QUOTRIDR_ID);

                $.ajax({
                    "async": false,
                    "crossDomain": true,
                    type: 'POST',
                    url: "/New_Business/SaveQuotaRider?FSPM_PRODUCT_ID=" + FSPM_PRODUCT_ID + "&_FGQG_COMPGRP_ID=" + _FGQG_COMPGRP_ID + "&FGQE_QUOTEVNT_ID=" + FGQE_QUOTEVNT_ID + "&FGQR_RIDERST_DATE=" + FGQR_RIDERST_DATE + "&FGQR_RIDEREN_DATE=" + FGQR_RIDEREN_DATE + "&FGQR_PFREQ_FSCD_DID=" + FGQR_PFREQ_FSCD_DID + "&FGQR_PAYBLE_FLAG=" + FGQR_PAYBLE_FLAG + "&FGQR_LOADING_TYPE=" + FGQR_LOADING_TYPE + "&FGQR_LOADING_VALUE=" + FGQR_LOADING_VALUE + "&FGQR_RIDER_CONTRIB=" + FGQR_RIDER_CONTRIB + "&FGQR_NET_CONTRIB=" + FGQR_NET_CONTRIB + "&FGQR_STATUS=" + FGQR_STATUS + "&FGQH_QUOTATHDR_ID=" + FGQH_QUOTATHDR_ID + "&FGQR_QUOTRIDR_ID=" + FGQR_QUOTRIDR_ID + "",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    processData: true,
                    success: function (repo) {
                        //alert("Rider successfully Saved" + repo);
                    },
                    error: function () {
                        alert("Rider coundn't Saved");
                    }
                });
            }
            $('#AddRider').modal('hide');
        });
    });

    //Creating new Rider Details
    $(document).ready(function () {
        var nextEvent = 0;
        $("#EventRow").val(nextEvent);
        $("#btnAddEvent").click(function (e) {
            e.preventDefault();
            if ($("#TableIdEvent tbody").length == 0) {
                $("#TableIdEvent").append("<tbody></tbody>");
            }
            nextEvent += 1;

            var totalRowCount = 0;
            var rowCount = 0;
            var table = document.getElementById("TableIdEvent");
            var rows = table.getElementsByTagName("tr")
            for (var i = 0; i < rows.length; i++) {
                totalRowCount++;
                if (rows[i].getElementsByTagName("td").length > 0) {
                    rowCount++;
                }
            }
            if (totalRowCount > 0) {
                nextEvent = totalRowCount;
            }

            if (i <= 0) {
                $("#TableIdEvent tbody").append("<tr><td style='width:20%' class='text-white' style='font-weight: bold; text-align: center;'>Event Code</td>" +
                    /* "<td class='text-white' style='font-weight: bold; text-align: center; width:100px'>Event Name</td >" +*/
                    "<td class='text-white' style='font-weight: bold; text-align: center;'>Start Date</td > " +
                    "<td class='text-white' style='font-weight: bold; text-align: center;'>End Date</td > " +
                    "<td class='text-white' style='font-weight: bold; text-align: center;'>Frequency</td > " +
                    "<td class='text-white' style='font-weight: bold; text-align: center;'>Paybale</td > " +
                    "<td class='text-white' style='font-weight: bold; text-align: center;'>Event contrib</td > " +
                    "<td class='text-white' style='font-weight: bold; text-align: center;'>Event Loading</td > " +
                    "<td class='text-white' style='font-weight: bold; text-align: center;'>Net Cont</td > " +
                    "<td class='text-white' style='font-weight: bold; text-align: center;'>Status</td>");
            }
            var FGQH_QUOTATHDR_ID = $("#FGQH_QUOTATHDR_ID").val();
            //alert(FGQH_QUOTATHDR_ID);
            // Append product to the table
            $("#TableIdEvent tbody").append("<tr>" +
                "<td><select class='form-select' style='width:195px;' onchange='Get_EventName(this.id,this.value)' name='FSCE_COVREVENT_ID' id='FSCE_COVREVENT_ID" + nextEvent + "' ><option>Select</option></select></td>" +
                /* "<td ><input class='form-control' style='width:100%;' name='Event_Name' id='Event_Name" + nextEvent + "'></td>" +*/
                "<td><input class='datefield form-control' data-val='true' data-val-required='Date is required' type='date' style='width:110px;' maxlength='10' name='FGQE_EVENTST_DATE' id='FGQE_EVENTST_DATE" + nextEvent + "'></td>" +
                "<td><input class='datefield form-control' data-val='true' data-val-required='Date is required' type='date' style='width:110px;' maxlength='10' name='FGQE_EVENTEN_DATE' id='FGQE_EVENTEN_DATE" + nextEvent + "'></td>" +
                "<td><select class='form-select' style='width:142px;' name='FGQE_PFREQ_FSCD_DID' id='FGQE_PFREQ_FSCD_DID" + nextEvent + "''><option>Select</option></select></td>" +
                "<td><select class='form-select' style='width:100px;' name='FGQE_PAYBLE_FLAG' id='FGQE_PAYBLE_FLAG" + nextEvent + "''><option>Select</option> <option value='1'>One</option> <option value='2'>Two</option><option value='3'>Three</option><option value='4'>Four</option><option value='5'>Five</option><option value='6'>Six</option><option value='7'>Seven</option></select></td>" +
                "<td><input class='form-control' style='width:100px;' name='FGQE_EVNT_CONTRIB' id='FGQE_EVNT_CONTRIB" + nextEvent + "'></td>" +
                "<td><input class='form-control' style='width:100px;' name='FGQE_EVNT_LOADING' id='FGQE_EVNT_LOADING" + nextEvent + "' ></td>" +
                "<td><input class='form-control' style='width:100px;' name='FGQE_NET_CONTRIB' id='FGQE_NET_CONTRIB" + nextEvent + "'></td>" +
                "<td><select class='form-select' style='width:123px;' name='FGQE_STATUS' id='FGQE_STATUS" + nextEvent + "' ><option>Select</option> <option value='A'>Active</option> <option value='D'>Un-Active</option></select>" +
                "<input class='form-control' style='width:10%;' hidden='hidden' name='FGQH_QUOTATHDR_ID' id='FGQH_QUOTATHDR_ID" + nextEvent + "' value = '" + FGQH_QUOTATHDR_ID + "'>" +
                "<input class='form-control' style='width:10%;' hidden='hidden' name='_FGQG_COMPGRP_ID' id='_FGQG_COMPGRP_ID" + nextEvent + "' value = '" + _FGQG_COMPGRP_ID + "'></td>" +
                "</tr>");
            $("#EventRow").val(nextEvent);

            //alert("nextEvent" + $("#EventRow").val());

            $.ajax({
                "async": false,
                "crossDomain": true,
                url: "http://" + Result_API + "/api/GlobalParameters/GetGlobalParamByCategory/PFREQ",
                type: "GET",
                contentType: "application/json; charset=utf-8",
                datatype: JSON,
                timeout: 5000,
                cache: false,
                success: function (result) {
                    $(result).each(function () {
                        $("#FGQE_PFREQ_FSCD_DID" + nextEvent).append($("<option></option>").val(this.PARAM_VALUE).html(this.PARAM_NAME));
                    });
                },
                error: function (data) { }
            });

            //Getting list from Database for Product
            $.ajax({
                "async": false,
                "crossDomain": true,
                url: "http://" + Result_API + "/api/QuotationEvent/GetQuotaEventList/0",
                type: "GET",
                contentType: "application/json; charset=utf-8",
                datatype: JSON,
                timeout: 5000,
                cache: false,
                success: function (result) {
                    $(result).each(function () {
                        $("#FSCE_COVREVENT_ID" + nextEvent).append($("<option></option>").val(this.FSCE_COVREVENT_ID).html(this.FSCE_COVREVENT_DESCR));
                        // $("#Event_Name" + nextEvent)
                    });
                },
                error: function (data) { }
            })
        });
    });


    //Creating new Rider Details
    $(document).ready(function () {
        var nextRider = 0;
        $("#RiderRow").val(nextRider);
        $("#btnAddRider").click(function (e) {
            e.preventDefault();
            if ($("#TableIdRider tbody").length == 0) {
                $("#TableIdRider").append("<tbody></tbody>");
            }
            nextRider += 1;
            var totalRowCount = 0;
            var rowCount = 0;
            var table = document.getElementById("TableIdRider");
            var rows = table.getElementsByTagName("tr")
            for (var i = 0; i < rows.length; i++) {
                totalRowCount++;
                if (rows[i].getElementsByTagName("td").length > 0) {
                    rowCount++;
                }
            }
            if (totalRowCount > 0) {
                nextRider = totalRowCount;
            } else {

                //nextRider += 1;
            }
            if (i <= 0) {
                $("#TableIdRider tbody").append("<tr><td class='text-white' style='font-weight: bold; text-align: center; '>Rider Code</td>" +
                    "<td class='text-white' style='font-weight: bold; text-align: center; '>Rider Name</td >" +
                    "<td class='text-white' style='font-weight: bold; text-align: center; '>Event Covered</td > " +
                    "<td class='text-white' style='font-weight: bold; text-align: center; '>Start Date</td > " +
                    "<td class='text-white' style='font-weight: bold; text-align: center; '>End Date</td > " +
                    "<td class='text-white' style='font-weight: bold; text-align: center; '>Frequency</td > " +
                    "<td class='text-white' style='font-weight: bold; text-align: center; '>Paybale</td > " +
                    "<td class='text-white' style='font-weight: bold; text-align: center; '>Loading Type</td > " +
                    "<td class='text-white' style='font-weight: bold; text-align: center; '>Loading Value</td > " +
                    "<td class='text-white' style='font-weight: bold; text-align: center; '>Rider Cont</td > " +
                    "<td class='text-white' style='font-weight: bold; text-align: center; '>Net Cont</td > " +
                    "<td class='text-white' style='font-weight: bold; text-align: center; '>Status</td>");
            }
            var FGQH_QUOTATHDR_ID = $("#FGQH_QUOTATHDR_ID").val();

            // Append product to the table
            $("#TableIdRider tbody").append("<tr>" +
                "<td><select class='form-select' style='width:220px;'  onchange='Rider_Product(this.id,this.value)' name='FSPM_PRODUCT_ID' id='FSPM_PRODUCT_ID" + nextRider + "' ><option>Select</option></select></td>" +
                "<td><input class='form-control' style='width:100px' readonly='readonly' name='FGQG_PREMIUM_' id='FGQG_PREMIUM_" + nextRider + "'></td>" +
                "<td><input class='form-control' style='width:100px' readonly='readonly' name='FGQE_QUOTEVNT_ID' id='FGQE_QUOTEVNT_ID" + nextRider + "'></td>" +
                "<td><input class='datefield form-control' data-val='true' data-val-required='Date is required' type='date' style='width:120px' maxlength='10' name='FGQR_RIDERST_DATE' id='FGQR_RIDERST_DATE" + nextRider + "'></td>" +
                "<td><input class='datefield form-control' data-val='true' data-val-required='Date is required' type='date' style='width:120px' maxlength='10' name='FGQR_RIDEREN_DATE' id='FGQR_RIDEREN_DATE" + nextRider + "'></td>" +
                "<td><select class='form-select' style='width:150px;' name='FGQR_PFREQ_FSCD_DID' id='FGQR_PFREQ_FSCD_DID" + nextRider + "''><option>Select</option> </select></td>" +
                "<td><select class='form-select' style='width:100px;' name='FGQR_PAYBLE_FLAG' id='FGQR_PAYBLE_FLAG" + nextRider + "''><option>Select</option> <option value='1'>One</option> <option value='2'>Two</option><option value='3'>Three</option><option value='4'>Four</option><option value='5'>Five</option><option value='6'>Six</option><option value='7'>Seven</option></td>" +
                "<td><select class='form-select' style='width:110px' name='FGQR_LOADING_TYPE' id='FGQR_LOADING_TYPE" + nextRider + "'><option>Select</option> <option value='1'>Manual</option> <option value='2'>Flat</option><option value='3'>Multiple</option></select></td>" +
                "<td><input class='form-control' style='width:100px' name='FGQR_LOADING_VALUE' id='FGQR_LOADING_VALUE" + nextRider + "'  ></td>" +
                "<td><input class='form-control' style='width:100px' name='FGQR_RIDER_CONTRIB' id='FGQR_RIDER_CONTRIB" + nextRider + "' ></td>" +
                "<td><input class='form-control' style='width:100px' name='FGQR_NET_CONTRIB' id='FGQR_NET_CONTRIB" + nextRider + "'></td>" +
                "<td><select class='form-select' style='width:120px;' name='FGQR_STATUS' id='FGQR_STATUS" + nextRider + "'><option>Select</option> <option value='A'>Active</option> <option value='D'>Un-Active</option></select>" +
                "<input class='form-control' style='width:10%;' hidden='hidden' name='FGQH_QUOTATHDR_ID' id='FGQH_QUOTATHDR_ID" + nextRider + "' value = '" + FGQH_QUOTATHDR_ID + "'>" +
                "<input class='form-control' style='width:10%;' hidden='hidden' name='_FGQG_COMPGRP_ID' id='_FGQG_COMPGRP_ID" + nextRider + "' value = '" + _FGQG_COMPGRP_ID + "'></td>" +


                "</tr>");
            $("#RiderRow").val(nextRider);

            $.ajax({
                "async": false,
                "crossDomain": true,
                url: "http://" + Result_API + "/api/GlobalParameters/GetGlobalParamByCategory/PFREQ",
                type: "GET",
                contentType: "application/json; charset=utf-8",
                datatype: JSON,
                timeout: 5000,
                cache: false,
                success: function (result) {
                    $(result).each(function () {
                        $("#FGQR_PFREQ_FSCD_DID" + nextRider).append($("<option></option>").val(this.PARAM_VALUE).html(this.PARAM_NAME));
                    });
                },
                error: function (data) { }
            });


            //Getting list from Database for Product
            $.ajax({
                "async": false,
                "crossDomain": true,
                url: "http://" + Result_API + "/api/Product/GetRiderDetails/2",
                type: "GET",
                contentType: "application/json; charset=utf-8",
                datatype: JSON,
                timeout: 500,
                cache: false,
                success: function (result) {
                    $(result).each(function () {
                        $("#FSPM_PRODUCT_ID" + nextRider).append($("<option></option>").val(this.FSPM_PRODUCT_ID).html(this.FSPM_PRODUCT_NAME));
                    });
                },
                error: function (data) { }
            });
        });
    });


    function Get_EventName(EventId, ValueId) {
        const alpha_numeric = Array.from('123456789' + ' ')
        const json_string = JSON.stringify(ValueId)
        let filterd_string = ''

        for (let i = 0; i < json_string.length; i++) {

            let char = json_string[i]
            let index = alpha_numeric.indexOf(char)
            if (index > -1) {
                filterd_string += alpha_numeric[index]
            }
        }

        $.ajax({
            "async": false,
            "crossDomain": true,
            type: "GET",
            url: "http://" + Result_API + "/api/Product/GetProductDetailsById/" + filterd_string,
            cache: false,
            timeout: 5000,
            contentType: "application/json; charset=utf-8",
            datatype: JSON,
            success: function (data) {
                if (data.length > 0) {
                    $("#FGQG_PREMIUM_" + filterd_string).val(data[0].FSPM_PRODUCT_DESP);
                }
            }
        });
    }

    function Rider_Product(ProductId, ValueId) {
        const alpha_numeric = Array.from('0123456789' + ' ')
        const json_string = JSON.stringify(ProductId)
        let filterd_string = ''
        for (let i = 0; i < json_string.length; i++) {

            let char = json_string[i]
            let index = alpha_numeric.indexOf(char)
            if (index > -1) {
                filterd_string += alpha_numeric[index]
            }
        }

        $.ajax({
            "async": false,
            "crossDomain": true,
            type: "GET",
            url: "http://" + Result_API + "/api/Product/GetProductDetailsById/" + ValueId,
            cache: false,
            timeout: 5000,
            contentType: "application/json; charset=utf-8",
            datatype: JSON,
            success: function (data) {
                if (data.length > 0) {
                    $("#FGQG_PREMIUM_" + filterd_string).val(data[0].FSPM_PRODUCT_DESP);
                }
            }
        });
    }


    //Creating new Company Group Details
    $(document).ready(function () {
        var nextCG = 0;

        $("#CompanyRow").val(nextCG);
        $("#btnAddQuoComp").click(function (e) {
            e.preventDefault();
            if ($("#TableId tbody").length == 0) {
                $("#TableId").append("<tbody></tbody>");
            }
            nextCG += 1;
            var opsht = "";
            var totalRowCount = 0;
            var rowCount = 0;
            var table = document.getElementById("TableId");
            var rows = table.getElementsByTagName("tr")
            for (var i = 1; i < rows.length; i++) {
                totalRowCount++;
                if (rows[i].getElementsByTagName("td").length > 0) {
                    rowCount++;
                }
            }
            if (totalRowCount > 0) {
                //nextCG = totalRowCount;
                 nextCG = totalRowCount + 1;
            }

            if (i <= 1) {
                $("#TableId tbody").append("<tr> <td  class='text-white' style='font-weight:bold'>Category</td >" +
                    "<td class='text-white' style='font-weight:bold'>Sum Covered Creteria</td>" +
                    "<td class='text-white' style='font-weight:bold'>Flat Sum Covered</td>" +
                    "<td class='text-white' style='font-weight:bold'>No. of Salary Maultiple</td>" +
                    "<td class='text-white' style='font-weight:bold'>Min Sum Covered</td>" +
                    "<td class='text-white' style='font-weight:bold'>Max Sum Covered</td>" +
                    "<td class='text-white' style='font-weight:bold'>Contribution</td>" +
                    "<td class='text-white' style='font-weight:bold'>Head Count</td>" +
                    "<td class='text-white' style='font-weight:bold'>Sum Covered</td>" +
                    "<td class='text-white' style='font-weight:bold'>Status</td>" +
                    "<td class='text-white' style='font-weight:bold'>Rider</td>" +
                    "<td class='text-white' style='font-weight:bold'>Delete Info</td > ");
            }

            $("#TableId tbody").append("<tr>" +
                "<td ><select class='form-select' style='width:250px;' name='FGQH_QTGRC_FSCD_DID' id='FGQH_QTGRC_FSCD_DID" + nextCG + "' ></select></td>" +
                "<td ><select class='form-select' style='width:160px;' onchange='criteriaSelect(this.id,this.value)' name='FGQG_SUMASSRD_CRITRIA' id='FGQG_SUMASSRD_CRITRIA" + nextCG + "''><option value=''>Select</option> <option value='1'>Manual</option> <option value='2'>Flat</option><option value='3'>Salary Multiple</option></select></td>" +
                "<td ><input class='form-control' style='width:120px;' maxlength='10' name='FGQG_FIXED_AMOUNT' id='FGQG_FIXED_AMOUNT" + nextCG + "'  ></td>" +
                "<td ><input class='form-control' style='width:160px;' maxlength='10' name='FGQG_NOOFSALARY_AMT' id='FGQG_NOOFSALARY_AMT" + nextCG + "'></td>" +
                "<td ><input class='form-control' style='width:150px;' maxlength='10' name='FGQG_MIN_SUMASSURD' id='FGQG_MIN_SUMASSURD" + nextCG + "'></td>" +
                "<td ><input class='form-control' style='width:160px;' maxlength='10' name='FGQG_MAX_SUMASSURD' id='FGQG_MAX_SUMASSURD" + nextCG + "'></td>" +
                "<td ><input class='form-control' style='width:120px;' maxlength='8' name='FGQG_PREMIUM' id='FGQG_PREMIUM" + nextCG + "'  value = '0'></td>" +
                "<td ><input class='form-control' style='width:120px;' maxlength='10' name='FGQG_HEADCONT_TOTSALARY' id='FGQG_HEADCONT_TOTSALARY" + nextCG + "' ></td>" +
                "<td ><select class='form-select' style='width:160px;' name='FGQG_PER_FREQNCY' id='FGQG_PER_FREQNCY" + nextCG + "''><option value=''>Select</option> <option value='1000'>Per Milie</option> <option value='100'>Per Hand</option></select></td>" +
                "<td ><select class='form-select' style='width:120px;' name='FGQG_STATUS' id='FGQG_STATUS" + nextCG + "'><option value=''>Select</option> <option value='Y'>Yes</option> <option value='N'>NO</option></select></td>" +
                "<td ><select class='form-select' style='width:120px;' onchange='getModal(this,this.id)' name='ShowModelDDL' id='ShowModelDDL" + nextCG + "''><option value=''>Select</option> <option value='1'>Rider</option> <option value='2'>Event</option></select></td>" +
                "<td ><button type='button' class='form-control' height ='50px;' width='60px;' name='BtnComQuoDelete' id='BtnComQuoDelete" + nextCG + "' > <i class='fa fa-trash'></i> </button>" +
                //"<td><img class='form-control' center id ='Ins_static_btn" + nextCG + "' src='/Assets/img/photos/trashbin.png' alt='' width='50' height='55' style='color:white'/>" +
                "<input class='form-control' style='width:10px;' hidden='hidden' name='FGQG_COMPGRP_ID' id='FGQG_COMPGRP_ID'" + nextCG + " value = '0'></td>" +
                "</tr>");

            $.ajax({
                "async": false,
                "crossDomain": true,
                url: "http://" + Result_API + "/api/GlobalParameters/GetGlobalParamByCategory/QTGRC",
                type: "GET",
                contentType: "application/json; charset=utf-8",
                datatype: JSON,
                timeout: 5000,
                cache: false,
                success: function (result2 ) {
                    for (var i = 0; i < result2.length; i++) {
                        opsht += '<option value="' + result2[i].PARAM_VALUE + '">' + result2[i].PARAM_NAME + '</option>';
                    }
                },
                error: function (data) { }
            });

            var totalRowCount = 0;
            var rowCount = 0;
            var table = document.getElementById("TableId");
            var rows = table.getElementsByTagName("tr")
            for (var y = 0; y < rows.length; y++) {
                totalRowCount++;
                if (rows[y].getElementsByTagName("td").length > 0) {
                    rowCount++;
                }
            }
            if (totalRowCount > 0) {

                nextCG = totalRowCount - 1;
            }
            $("#CompanyRow").val(nextCG);
            $("#FGQH_QTGRC_FSCD_DID" + nextCG).append(opsht);
        });
    });
    //function HS_FatAndFix() {

    //    alert("EventId..." + EventId + "...." + ValueId);
    //    const alpha_numeric = Array.from('123456789' + ' ')
    //    const json_string = JSON.stringify(ValueId)
    //    let filterd_string = ''

    //    alert("EventId..." + EventId + "...." + ValueId);
    //    for (let i = 0; i < json_string.length; i++) {

    //        let char = json_string[i]
    //        let index = alpha_numeric.indexOf(char)
    //        if (index > -1) {
    //            filterd_string += alpha_numeric[index]
    //        }
    //    }
    //    if (FGQG_NOOFSALARY_AMT == 1) {

    //        $("#FGQG_NOOFSALARY_AMT" + filterd_string).val(data[0].FSPM_PRODUCT_DESP);
    //    } else if(FGQG_NOOFSALARY_AMT == 2){
    //        $("#FGQG_NOOFSALARY_AMT" + filterd_string).val(data[0].FSPM_PRODUCT_DESP);
    //    }
    //}
</script>
<script type="text/javascript">

    function getModal(DDL_Option, FGQG_COMPGRP_ID) {

        const alpha_numeric = Array.from('0123456789' + ' ')
        const json_string = JSON.stringify(FGQG_COMPGRP_ID)
        let filterd_string = ''

        for (let i = 0; i < json_string.length; i++) {

            let char = json_string[i]
            let index = alpha_numeric.indexOf(char)
            if (index > -1) {
                filterd_string += alpha_numeric[index]
            }
        }

        var FGQH_QUOTATHDR_ID = $("#FGQH_QUOTATHDR_ID").val();
        //alert('FGQH_QUOTATHDR_ID'+FGQH_QUOTATHDR_ID);
        //_FGQG_COMPGRP_ID =  $.trim($('#_FGQG_COMPGRP_ID' + filterd_string).val());
        _FGQG_COMPGRP_ID = document.getElementById('FGQG_COMPGRP_ID' + filterd_string).value;
        //alert(_FGQG_COMPGRP_ID + "....FGQG_COMPGRP_ID..." + FGQH_QUOTATHDR_ID);


        if (FGQH_QUOTATHDR_ID > 0) {
            if (DDL_Option.value == 1) {
                $('#AddEvent').modal('hide');
                $('#AddRider').modal('show');
                var Rideritr = 1;
                var Status = '';
                var opsht = "", opsht2 = "";
                //alert($("#FGQH_QUOTATHDR_ID").val() + "......" + _FGQG_COMPGRP_ID);
                $.ajax({
                    "async": false,
                    "crossDomain": true,
                    url: "http://" + Result_API + "/api/QuotationRider/GetQuotaRiderDetails/" + $("#FGQH_QUOTATHDR_ID").val() + "/" + _FGQG_COMPGRP_ID,
                    type: "GET",
                    cache: false,
                    contentType: "application/json; charset=utf-8",
                    datatype: JSON,
                    //timeout: 5000,
                    beforeSend: function (xhr) {

                        //Getting list from Database for GetRiderDetails
                        $.ajax({
                            "async": false,
                            "crossDomain": true,
                            url: "http://" + Result_API + "/api/Product/GetRiderDetails/2",
                            type: "GET",
                            contentType: "application/json; charset=utf-8",
                            datatype: JSON,
                            timeout: 5000,
                            cache: false,
                            success: function (result2) {
                                for (var iB = 0; iB < result2.length; iB++) {
                                    opsht2 += '<option value="' + result2[iB].FSPM_PRODUCT_ID + '">' + result2[iB].FSPM_PRODUCT_NAME + '</option>';
                                }
                                //alert(opsht2);
                            },
                            error: function (data) { }
                        });

                        $.ajax({
                            "async": false,
                            "crossDomain": true,
                            url: "http://" + Result_API + "/api/GlobalParameters/GetGlobalParamByCategory/PFREQ",
                            type: "GET",
                            contentType: "application/json; charset=utf-8",
                            datatype: JSON,
                            timeout: 5000,
                            cache: false,
                            success: function (result1) {
                                for (var iA = 0; iA < result1.length; iA++) {
                                    opsht += '<option value="' + result1[iA].PARAM_VALUE + '">' + result1[iA].PARAM_NAME + '</option>';
                                }
                                //alert(opsht);
                            },
                            error: function (data2) { }
                        });
                    },
                    success: function (RiderData) {
                        $('#TableIdRider tbody').empty();
                        if ($("#TableIdRider tbody").length == 0) {
                            $("#TableIdRider").append("<tbody></tbody>");
                        }

                        for (var i = 0; i < RiderData.length; i++) {
                            // alert('1');
                            if (i <= 0) {
                                $("#TableIdRider tbody").append("<tr><td class='text-white' style='font-weight: bold; text-align: center; width:100px'>Rider Code</td>" +
                                    "<td class='text-white' style='font-weight: bold; text-align: center;'>Rider Name</td >" +
                                    "<td class='text-white' style='font-weight: bold; text-align: center;'>Event Covered</td > " +
                                    "<td class='text-white' style='font-weight: bold; text-align: center;'>Start Date</td > " +
                                    "<td class='text-white' style='font-weight: bold; text-align: center;'>End Date</td > " +
                                    "<td class='text-white' style='font-weight: bold; text-align: center;'>Frequency</td > " +
                                    "<td class='text-white' style='font-weight: bold; text-align: center;'>Paybale</td > " +
                                    "<td class='text-white' style='font-weight: bold; text-align: center;'>Loading Type</td > " +
                                    "<td class='text-white' style='font-weight: bold; text-align: center;'>Loading Value</td > " +
                                    "<td class='text-white' style='font-weight: bold; text-align: center;'>Rider Cont</td > " +
                                    "<td class='text-white' style='font-weight: bold; text-align: center;'>Net Cont</td > " +
                                    "<td class='text-white' style='font-weight: bold; text-align: center;'>Status</td> " +
                                    //"<td class='text-white' style='font-weight: bold; text-align: center; width:10px'></td> " +
                                    "</tr>");
                            }
                            var _FGQR_RIDERST_DATE = new Date(RiderData[i].FGQR_RIDERST_DATE);
                            var day = ('0' + _FGQR_RIDERST_DATE.getDate()).slice(-2);

                            //if (day < 10)
                            //    day = '0' + day.toString();

                            var month = ('0' + _FGQR_RIDERST_DATE.getMonth()).slice(-2);
                            month = Number(month) + 1;

                            if (month < 10)
                                month = '0' + month.toString();

                            var _FGQR_RIDERST_DATE = _FGQR_RIDERST_DATE.getFullYear() + "-" + (month) + "-" + (day);
                            var _FGQR_RIDEREN_DATE = new Date(RiderData[i].FGQR_RIDEREN_DATE);
                            var day = ('0' + _FGQR_RIDEREN_DATE.getDate()).slice(-2);
                            var month = ('0' + _FGQR_RIDEREN_DATE.getMonth()).slice(-2);

                            month = Number(month) + 1;

                            if (month < 10)
                                month = '0' + month.toString();
                            var _FGQR_RIDEREN_DATE = _FGQR_RIDEREN_DATE.getFullYear() + "-" + (month) + "-" + (day);

                            $("#TableIdRider tbody").append("<tr>" +
                                "<td ><select class='form-select' style='width:220px;' onchange='Rider_Product(this.id,this.value)' name='FSPM_PRODUCT_ID' id='FSPM_PRODUCT_ID" + i + "' ><option>" + opsht2 + "</option></select></td>" +
                                "<td ><input class='form-control' style='width:100px;' readonly='readonly' name='FGQG_PREMIUM_' id='FGQG_PREMIUM_" + i + "' ></td>" +
                                "<td ><input class='form-control' style='width:100px;' readonly='readonly' name='FGQE_QUOTEVNT_ID' id='FGQE_QUOTEVNT_ID" + i + "' value = '" + RiderData[i].FGQE_QUOTEVNT_ID + "'></td>" +
                                "<td ><input class='datefield form-control' data-val='true' data-val-required='Date is required' type='date' style='width:120px;' maxlength='10' name='FGQR_RIDERST_DATE' id='FGQR_RIDERST_DATE" + i + "' value = '" + _FGQR_RIDERST_DATE + "'></td>" +
                                "<td ><input class='datefield form-control' data-val='true' data-val-required='Date is required' type='date' style='width:120px;' maxlength='10' name='FGQR_RIDEREN_DATE' id='FGQR_RIDEREN_DATE" + i + "' value = '" + _FGQR_RIDEREN_DATE + "'></td>" +
                                "<td ><select class='form-select' style='width:150px;' name='FGQR_PFREQ_FSCD_DID' id='FGQR_PFREQ_FSCD_DID" + i + "''><option>" + opsht + "</option> </select></td>" +
                                "<td ><select class='form-select' style='width:100px;' name='FGQR_PAYBLE_FLAG' id='FGQR_PAYBLE_FLAG" + i + "''><option value='1'>One</option> <option value='2'>Two</option><option value='3'>Three</option><option value='4'>Four</option><option value='5'>Five</option><option value='6'>Six</option><option value='7'>Seven</option></select></td>" +
                                "<td ><select class='form-select' style='width:110px;' name='FGQR_LOADING_TYPE' id='FGQR_LOADING_TYPE" + i + "' value = '" + RiderData[i].FGQR_LOADING_TYPE + "'><option value='1'>Manual</option> <option value='2'>Flat</option><option value='3'>Multiple</option></select></td>" +
                                "<td ><input class='form-control' style='width:100px;' name='FGQR_LOADING_VALUE' id='FGQR_LOADING_VALUE" + i + "'  value = '" + RiderData[i].FGQR_LOADING_VALUE + "' ></td>" +
                                "<td ><input class='form-control' style='width:100px;' name='FGQR_RIDER_CONTRIB' id='FGQR_RIDER_CONTRIB" + i + "' value = '" + RiderData[i].FGQR_RIDER_CONTRIB + "' ></td>" +
                                "<td ><input class='form-control' style='width:100px;' name='FGQR_NET_CONTRIB' id='FGQR_NET_CONTRIB" + i + "' value = '" + RiderData[i].FGQR_NET_CONTRIB + "'></td>" +
                                "<td ><select class='form-select' style='width:125px;' name='FGQR_STATUS' id='FGQR_STATUS" + i + "'><option value='A'>Active</option> <option value='D'>Un-Active</option></select>" +
                                "<input class='form-control' style='width:10px;' hidden name='_FGQG_COMPGRP_ID' id='_FGQG_COMPGRP_ID" + i + "' value = '" + _FGQG_COMPGRP_ID + "'>" +
                                "<input class='form-control' style='width:10px;' hidden name='FGQH_QUOTATHDR_ID' id='FGQH_QUOTATHDR_ID" + i + "' value = '" + RiderData[i].FGQH_QUOTATHDR_ID + "' >" +
                                "<input class='form-control' style='width:10px;' hidden name='FGQR_QUOTRIDR_ID' id='FGQR_QUOTRIDR_ID" + i + "' value = '" + RiderData[i].FGQR_QUOTRIDR_ID + "' ></td>" +
                                "</tr>");
                            $("#FGQR_QUOTRIDR_ID" + i).val(RiderData[i].FGQR_QUOTRIDR_ID);
                            $("#FSPM_PRODUCT_ID" + i).val(RiderData[i].FSPM_PRODUCT_ID);
                            $("#FGQR_PFREQ_FSCD_DID" + i).val(RiderData[i].FGQR_PFREQ_FSCD_DID);
                            $("#FGQR_STATUS" + i).val(RiderData[i].FGQR_STATUS);
                            $("#FGQR_PAYBLE_FLAG" + i).val(RiderData[i].FGQR_PAYBLE_FLAG);

                            _FGQG_COMPGRP_ID = document.getElementById('_FGQG_COMPGRP_ID' + i).value;
                            $('select option')
                                .filter(function () {
                                    return !this.value || $.trim(this.value).length == 0 || $.trim(this.text).length == 0;
                                })
                                .remove();

                            var totalRowCount = 0;
                            var rowCount = 0;
                            var table = document.getElementById("TableIdRider");
                            var rows = table.getElementsByTagName("tr")
                            for (var y = 0; y < rows.length; y++) {
                                totalRowCount++;
                                if (rows[y].getElementsByTagName("td").length > 0) {
                                    rowCount++;
                                }
                            }

                            if (totalRowCount > 0) {

                                Rideritr = totalRowCount - 1;
                            }
                            Rideritr += 1;
                            $("#RiderRow").val(Rideritr);
                        }
                    },
                    error: function (data) { }
                });
            }
            if (DDL_Option.value == 2) {

                var Eventitr = 1;
                var Status = '';
                var opsht = "", opsht2 = "";

                $.ajax({
                    "async": false,
                    "crossDomain": true,
                    url: "http://" + Result_API + "/api/QuotationEvent/GetQuotaEventDetails/" + $("#FGQH_QUOTATHDR_ID").val() + "/" + _FGQG_COMPGRP_ID,
                    type: "GET",
                    cache: false,
                    contentType: "application/json; charset=utf-8",
                    datatype: JSON,
                    timeout: 5000,
                    beforeSend: function (xhr) {

                        //Getting list from Database for Product
                        $.ajax({
                            "async": false,
                            "crossDomain": true,
                            url: "http://" + Result_API + "/api/QuotationEvent/GetQuotaEventList/0",
                            type: "GET",
                            contentType: "application/json; charset=utf-8",
                            datatype: JSON,
                            timeout: 5000,
                            cache: false,
                            success: function (result2) {
                                for (var iA = 1; iA < result2.length; iA++) {
                                    opsht += '<option value="' + result2[iA].FSCE_COVREVENT_ID + '">' + result2[iA].FSCE_COVREVENT_DESCR + '</option>';
                                }
                                //alert(opsht);
                            },
                            error: function (data) { }
                        });
                        $.ajax({
                            "async": false,
                            "crossDomain": true,
                            url: "http://" + Result_API + "/api/GlobalParameters/GetGlobalParamByCategory/PFREQ",
                            type: "GET",
                            contentType: "application/json; charset=utf-8",
                            datatype: JSON,
                            timeout: 5000,
                            cache: false,
                            success: function (result) {
                                for (var y = 0; y < result.length; y++) {
                                    opsht2 += '<option value="' + result[y].PARAM_VALUE + '">' + result[y].PARAM_NAME + '</option>';
                                }
                            },
                            error: function (data) { }
                        });
                    },
                    success: function (data) {
                        $('#TableIdEvent tbody').empty();
                        if ($("#TableIdEvent tbody").length == 0) {
                            $("#TableIdEvent").append("<tbody> </tbody>");
                        }
                        for (var i = 0; i < data.length; i++) {
                            if (i <= 0) {
                                $("#TableIdEvent tbody").append("<tr><td class='text-white' style='font-weight: bold; text-align: center; width:100px'>Event Code</td>" +
                                    // "<td class='text-white' style='font-weight: bold; text-align: center; width:100px'>Event Name</td >" +
                                    "<td class='text-white' style='font-weight: bold; text-align: center; width:100px'>Start Date</td > " +
                                    "<td class='text-white' style='font-weight: bold; text-align: center; width:100px'>End Date</td > " +
                                    "<td class='text-white' style='font-weight: bold; text-align: center; width:100px'>Frequency</td > " +
                                    "<td class='text-white' style='font-weight: bold; text-align: center; width:100px'>Paybale</td > " +
                                    "<td class='text-white' style='font-weight: bold; text-align: center; width:100px'>Event contrib</td > " +
                                    "<td class='text-white' style='font-weight: bold; text-align: center; width:100px'>Event Loading</td > " +
                                    "<td class='text-white' style='font-weight: bold; text-align: center; width:100px'>Net Cont</td > " +
                                    "<td class='text-white' style='font-weight: bold; text-align: center; width:100px'>Status</td> " +
                                    "<td class='text-white' style='font-weight: bold; text-align: center; width:10px'></td> " +
                                    "</tr>");
                            }
                            $("#TableIdEvent tbody").append("<tr>" +
                                "<td ><select class='form-select' style='width:195px;' name='FSCE_COVREVENT_ID' id='FSCE_COVREVENT_ID" + i + "' ><option>" + opsht + "</option></select></td>" +
                                // "<td ><input class='form-control' style='width:100%;' name='Event_Name' id='Event_Name" + Eventitr + "' value = '" + data[i].FGQR_NET_CONTRIB + "'></td>" +
                                "<td ><input class='datefield form-control' data-val='true' data-val-required='Date is required' type='date' style='width:110px;' maxlength='10' name='FGQE_EVENTST_DATE' id='FGQE_EVENTST_DATE" + i + "' value = '" + data[i].FGQE_EVENTST_DATE.split('T')[0] + "'></td>" +
                                "<td ><input class='datefield form-control' data-val='true' data-val-required='Date is required' type='date' style='width:110px;' maxlength='10' name='FGQE_EVENTEN_DATE' id='FGQE_EVENTEN_DATE" + i + "' value = '" + data[i].FGQE_EVENTEN_DATE.split('T')[0] + "'></td>" +
                                "<td ><select class='form-select' style='width:142px;' name='FGQE_PFREQ_FSCD_DID' id='FGQE_PFREQ_FSCD_DID" + i + "''><option>" + opsht2 + "</option></select></td>" +
                                "<td ><select class='form-select' style='width:100px;' name='FGQE_PAYBLE_FLAG' id='FGQE_PAYBLE_FLAG" + i + "'' ><option value='1'>One</option> <option value='2'>Two</option><option value='3'>Three</option><option value='4'>Four</option><option value='5'>Five</option><option value='6'>Six</option><option value='7'>Seven</option></select></td>" +
                                "<td ><input class='form-control' style='width:100px;' name='FGQE_EVNT_CONTRIB' id='FGQE_EVNT_CONTRIB" + i + "' value = '" + data[i].FGQE_EVNT_CONTRIB + "'></td>" +
                                "<td ><input class='form-control' style='width:100px;' name='FGQE_EVNT_LOADING' id='FGQE_EVNT_LOADING" + i + "'  value = '" + data[i].FGQE_EVNT_LOADING + "'></td>" +
                                "<td ><input class='form-control' style='width:100px;' name='FGQE_NET_CONTRIB' id='FGQE_NET_CONTRIB" + i + "' value = '" + data[i].FGQE_NET_CONTRIB + "'></td>" +
                                "<td ><select class='form-select' style='width:123px;' name='FGQE_STATUS' id='FGQE_STATUS" + i + "' ><option value='A'>Active</option> <option value='D'>Un-Active</option></select></td>" +
                                "<td ><input class='form-control' style='width:10%;' hidden name='_FGQG_COMPGRP_ID' id='_FGQG_COMPGRP_ID" + i + "' value = '" + _FGQG_COMPGRP_ID + "'>" +
                                "<input class='form-control' style='width:10%;' hidden name='FGQH_QUOTATHDR_ID' id='FGQH_QUOTATHDR_ID" + i + "' value = '" + data[i].FGQH_QUOTATHDR_ID + "'>" +
                                "<input class='form-control' style='width:10%;' hidden name='FGQE_QUOTEVNT_ID' id='FGQE_QUOTEVNT_ID" + i + "' value = '" + data[i].FGQE_QUOTEVNT_ID + "'></td>" +
                                "</tr>");

                            _FGQG_COMPGRP_ID = document.getElementById('_FGQG_COMPGRP_ID' + i).value;
                            $("#FSCE_COVREVENT_ID" + i).val(data[i].FSCE_COVREVENT_ID);
                            $("#FGQE_PFREQ_FSCD_DID" + i).val(data[i].FGQE_PFREQ_FSCD_DID);
                            $("#FGQE_STATUS" + i).val(data[i].FGQE_STATUS);
                            $("#FGQE_PAYBLE_FLAG" + i).val(data[i].FGQE_PAYBLE_FLAG);

                            Eventitr += 1;
                            $('select option')
                                .filter(function () {
                                    return !this.value || $.trim(this.value).length == 0 || $.trim(this.text).length == 0;
                                })
                                .remove();


                            var totalRowCount = 0;
                            var rowCount = 0;
                            var table = document.getElementById("TableIdEvent");
                            var rows = table.getElementsByTagName("tr")
                            for (var y = 0; y < rows.length; y++) {
                                totalRowCount++;
                                if (rows[y].getElementsByTagName("td").length > 0) {
                                    rowCount++;
                                }
                            }
                            if (totalRowCount > 0) {

                                Eventitr = totalRowCount - 1;
                            }
                            $("#EventRow").val(Eventitr);
                        }
                    },
                    error: function (data) { }
                });
                $('#AddRider').modal('hide');
                $('#AddEvent').modal('show');
            }
        } else { alert("Please select Any Quotation"); }
    }

    window.setTimeout(function () {
        $(".alert").fadeTo(500, 0).slideUp(500, function () {
            $(this).remove();
        });
    }, 4000);

    $(document).ready(function () {
        var next = 0;
        $("#AgentRow").val(next);
        $("#btnAddAgent").click(function (e) {
            e.preventDefault();
            if ($("#TableIdAgent tbody").length == 0) {
                $("#TableIdAgent").append("<tbody></tbody>");
            }
            next += 1;
            var totalRowCount = 0;
            var rowCount = 0;
            var table = document.getElementById("TableIdAgent");
            var rows = table.getElementsByTagName("tr")
            for (var i = 0; i < rows.length; i++) {
                totalRowCount++;
                if (rows[i].getElementsByTagName("td").length > 0) {
                    rowCount++;
                }
            }
            if (totalRowCount > 0) {
                next = totalRowCount;
            }
            if (i <= 0) {
                $("#TableIdAgent tbody").append("<tr><td class='text-white' style='font-weight:bold'>Agent Code</td>" +
                    "<td class='text-white' style='font-weight:bold'>Agent Name</td >" +
                    "<td class='text-white' style='font-weight:bold'>Agent Designation</td > " +
                    "<td class='text-white' style='font-weight:bold'>Agent Channel</td > " +
                    "<td class='text-white' style='font-weight:bold'>Agent Comm Per %</td > " +
                    "<td class='text-white' style='font-weight:bold'>Wakala On Pre %</td > " +
                    "<td class='text-white' style='font-weight:bold'>Status</td>" +
                    "<td class='text-white' style='font-weight:bold'>Delete Info</td></tr > ");
            }
            // Append product to the table
            $("#TableIdAgent tbody").append("<tr>" +
                "<td><select class='form-select' style='width:208px;' onchange='SetAgent(this.id,this.value)' name='FSAG_AGENT_CODE' id='FSAG_AGENT_CODE" + next + "'><option>-Select-</option> </td>" +
                "<td><input class='form-control' style='width:200px;' readonly name='FSAG_AGENT_NAME' id='FSAG_AGENT_NAME" + next + "'></td>" +
                "<td><input class='form-control' style='width:100px;' readonly name='SAG_AGENT_DESIGN' id='FSAG_AGENT_DESIGN" + next + "''></td>" +
                "<td><input class='form-control' style='width:100px;' readonly name='FSAG_AGENT_CHANNEL' id='FSAG_AGENT_CHANNEL" + next + "'></td>" +
                "<td><input class='form-control' style='width:100px;' maxlength='3' name='FGQA_COMMISSION_PERCENT' id='FGQA_COMMISSION_PERCENT" + next + "' ></td>" +
                "<td><input class='form-control' style='width:100px;' maxlength='3' name='FGQA_WAKALA_ONPREM' id='FGQA_WAKALA_ONPREM" + next + "' ></td>" +
                "<td><input class='form-control' style='width:100px;' readonly name='FSAG_STATUS' id='FSAG_STATUS" + next + "'</td>" +
                //"<td><img class='static_trash' center id ='Ins_static_btn" + next + "' src='/Assets/img/photos/trashbin.png' alt='' width='50' height='55' style='color:white'/>" +
                "<td ><button type='button' class='form-control' height ='50px;' width='60px;' name='BtnAgentDelete' id='BtnAgentDelete" + next + "' > <i class='fa fa-trash'></i> </button>" +
                "<input class='form-control' hidden='hidden' name='FGQA_COMPAGNT_ID' id='FGQA_COMPAGNT_ID' value = '0'></td>" +
                "</tr>");
            //$("#AgentRow").val(next);
            //alert(next);
            $.ajax({
                "async": false,
                "crossDomain": true,
                url: "http://" + Result_API + "/api/Quotation/GetAgentList",
                type: "GET",
                timeout: 5000,
                contentType: "application/json; charset=utf-8",
                datatype: JSON,
                cache: false,
                success: function (result) {
                    $(result).each(function () {
                        $("#FSAG_AGENT_CODE" + next).append($("<option></option>").val(this.FSAG_AGENT_CODE).html(this.FSAG_AGENT_CODE));
                    });
                },
                error: function (data) { }
            });


            var totalRowCount = 0;
            var rowCount = 0;
            var table = document.getElementById("TableIdAgent");
            var rows = table.getElementsByTagName("tr")
            for (var x = 0; x < rows.length; x++) {
                totalRowCount++;
                if (rows[x].getElementsByTagName("td").length > 0) {
                    rowCount++;
                }
            }
            if (totalRowCount > 0) {
                next = totalRowCount - 1;
            }
            $("#AgentRow").val(next);
        });
    });
    //Getting list from Database for Agent
    function SetAgent(field_id, field_value) {
        const alpha_numeric = Array.from('123456789' + ' ')
        const json_string = JSON.stringify(field_id)
        let filterd_string = ''

        for (let i = 0; i < json_string.length; i++) {

            let char = json_string[i]
            let index = alpha_numeric.indexOf(char)
            if (index > -1) {
                filterd_string += alpha_numeric[index]
            }
        }

        $.ajax({
            "async": false,
            "crossDomain": true,
            url: "http://" + Result_API + "/api/Quotation/GetAgentList",
            type: "GET",
            contentType: "application/json; charset=utf-8",
            datatype: JSON,
            timeout: 5000,
            cache: false,
            success: function (result) {

                $(result).each(function () {
                    for (var i = 0; i < result.length; i++) {
                        // alert(result[i].FSAG_AGENT_CODE + "-" + id);
                        if (result[i].FSAG_AGENT_CODE == field_value) {

                            // $("#FSAG_AGENT_CODE" + filterd_string).append($("<option></option>").val(result[i].FSAG_AGENT_CODE).html(result[i].FSAG_AGENT_NAME));
                            $("#FSAG_AGENT_NAME" + filterd_string).val(result[i].FSAG_AGENT_NAME);
                            $("#FSAG_AGENT_DESIGN" + filterd_string).val(result[i].FSDS_DESIGN_ID);
                            $("#FSAG_AGENT_CHANNEL" + filterd_string).val(result[i].FSAG_CHNLS_FSCD_DID);
                            $("#FSAG_STATUS" + filterd_string).val(result[i].FSAG_STATUS);
                        }
                    }
                });
            },
            error: function (data) { }
        });
    }

    $.ajax({
        url: "http://" + Result_API + "/api/GlobalParameters/GetGlobalParamGetCurrencyList",
        type: "GET",
        contentType: "application/json; charset=utf-8",
        datatype: JSON,
        timeout: 5000,
        cache: false,
        success: function (result) {
            $(result).each(function () {
                $("#FSCR_CURRENCY_CODE").append($("<option></option>").val(this.FSCR_CURRENCY_CODE).html(this.FSCR_CURRENCY_DESCR));
            });
        },
        error: function (data) { }
    });

    //Getting list from Database for Product
    $(document).ready(function () {
        $.ajax({
            "async": false,
            "crossDomain": true,
            url: "http://" + Result_API + "/api/Product/GetProductList",
            type: "GET",
            timeout: 5000,
            contentType: "application/json; charset=utf-8",
            datatype: JSON,
            cache: false,
            success: function (result) {
                $(result).each(function () {
                    $("#FSPM_PRODUCT_ID").append($("<option></option>").val(this.FSPM_PRODUCT_ID).html(this.FSPM_PRODUCT_NAME));
                });
            },
            error: function (data) { }
        });
    });

    //Getting list from Database for Product
    $(document).ready(function () {
        $.ajax({
            "async": false,
            "crossDomain": true,
            url: "http://" + Result_API + "/api/Institution/GetInstitutionList",
            type: "GET",
            contentType: "application/json; charset=utf-8",
            datatype: JSON,
            timeout: 5000,
            cache: false,
            success: function (result) {
                $(result).each(function () {
                    $("#FSLO_LOCATION_ID").append($("<option></option>").val(this.FSSI_INSTITUTE_ID).html(this.FSSI_DESCRIPTION));
                });
            },
            error: function (data) { }
        });
    });

    //Getting list from Database for Product
    function SetLocation() {
        var FSLO_LOCATION_ID = $('#FSLO_LOCATION_ID').find(":selected").attr('value');
        $('#FSLO_LOCATION_ID2').empty();
        $('#FSLO_LOCATION_ID3').empty();
        $.ajax({

            url: "http://" + Result_API + "/api/GlobalParameters/GetLocationList/" + FSLO_LOCATION_ID,
            type: "GET",
            timeout: 5000,
            cache: false,
            contentType: "application/json; charset=utf-8",
            datatype: JSON,
            success: function (result) {
                $(result).each(function () {
                    $("#FSLO_LOCATION_ID2").append($("<option></option>").val(this.FSLO_LOCATION_ID).html(this.FSLO_DESCRIPTION));
                    $("#FSLO_LOCATION_ID3").append($("<option></option>").val(this.FSLO_LOCATION_ID).html(this.FSLO_DESCRIPTION));

                });
            },
            error: function (data) { }
        });
    }

    function get_sbu() {

        var ProductID = $('#FSPM_PRODUCT_ID').find(":selected").attr('value');
        $.ajax({
            "async": false,
            "crossDomain": true,
            type: "GET",
            url: "http://" + Result_API + "/api/Product/GetProductDetailsById/" + ProductID,
            cache: false,
            timeout: 5000,
            contentType: "application/json; charset=utf-8",
            datatype: JSON,
            success: function (data) {
                if (data.length > 0) {
                    $('#FSPM_PRODUCT_DESP').val(data[0].FSPM_PRODUCT_DESP);

                }
            }
        });
    }
    $(document).ready(function () {
        $("#FGQH_PFREQ_FSCD_DID").change(function () {
            var ProductID = $('#FGQH_PFREQ_FSCD_DID').find(":selected").attr('value');
            $("#FGQH_QUOTATION_SVCTAX_PERC").val($(this).find('option:selected').text());
        });
    });


    //Getting data from DataBase for Payment Method
    $(document).ready(function () {
        $.ajax({
            "async": false,
            "crossDomain": true,
            url: " http://" + Result_API + "/api/GlobalParameters/GetGlobalParamByCategory/PYMET",
            type: "GET",
            timeout: 5000,
            contentType: "application/json; charset=utf-8",
            datatype: JSON,
            cache: false,
            success: function (result) {
                $(result).each(function () {
                    $("#FGQH_PYMET_FSCD_DID").append($("<option></option>").val(this.PARAM_VALUE).html(this.PARAM_NAME));
                });
            },
            error: function (data) { }
        });
    });
    //Getting Data from Database for Frequnce
    $(document).ready(function () {
        $.ajax({
            "async": false,
            "crossDomain": true,
            url: " http://" + Result_API + "/api/GlobalParameters/GetGlobalParamByCategory/PFREQ",
            type: "GET",
            timeout: 5000,
            contentType: "application/json; charset=utf-8",
            datatype: JSON,
            cache: false,
            success: function (result) {
                $(result).each(function () {
                    $("#FGQH_PFREQ_FSCD_DID").append($("<option></option>").val(this.PARAM_VALUE).html(this.PARAM_NAME));
                });
            },
            error: function (data) { }
        });
    });

    $(document).ready(function () {
        $('#btnQuotSearch').click(function (e) {
            e.preventDefault();
            var QuoationCode = $("#FSPM_PRODUCT_CODESER").val();
            var baseURL = "http://" + Result_API + "/api/Quotation/GetQuotationDetails/" + QuoationCode; //+ "/" + QuoationName
            var opsht = '';
            var opsht1 = '';
            $(".spinner-box").removeAttr("hidden", true);
            setTimeout(function () {
                $.ajax(baseURL,
                    {
                        "async": true,
                        "crossDomain": true,
                        type: "GET",
                        cache: false,
                        contentType: "application/json; charset=utf-8",
                        datatype: JSON,
                        timeout: 5000,
                        success: function (data, status, xhr) {
                            if (data.length != 0) {
                                $(data).each(function () {

                                    var _FGQH_QUOTATION_DATE = new Date(this.FGQH_QUOTATION_DATE);
                                    var day = ('0' + _FGQH_QUOTATION_DATE.getDate()).slice(-2);
                                    var month = ('0' + _FGQH_QUOTATION_DATE.getMonth()).slice(-2);
                                    month = Number(month) + 1;
                                    if (month < 10)
                                        month = '0' + month.toString();
                                    var _FGQH_QUOTATION_DATE = _FGQH_QUOTATION_DATE.getFullYear() + "-" + (month) + "-" + (day);

                                    var _FGQH_QUOTATION_REQDATE = new Date(this.FGQH_QUOTATION_REQDATE);
                                    var day = ('0' + _FGQH_QUOTATION_REQDATE.getDate()).slice(-2);
                                    var month = ('0' + _FGQH_QUOTATION_REQDATE.getMonth()).slice(-2);
                                    month = Number(month) + 1;
                                    if (month < 10)
                                        month = '0' + month.toString();
                                    var _FGQH_QUOTATION_REQDATE = _FGQH_QUOTATION_REQDATE.getFullYear() + "-" + (month) + "-" + (day);

                                    var _FGQH_QUOTATION_EXPDATE = new Date(this.FGQH_QUOTATION_EXPDATE);
                                    var day = ('0' + _FGQH_QUOTATION_EXPDATE.getDate()).slice(-2);
                                    var month = ('0' + _FGQH_QUOTATION_EXPDATE.getMonth()).slice(-2);
                                    month = Number(month) + 1;
                                    if (month < 10)
                                        month = '0' + month.toString();
                                    var _FGQH_QUOTATION_EXPDATE = _FGQH_QUOTATION_EXPDATE.getFullYear() + "-" + (month) + "-" + (day);

                                    var _FGQH_QUOTATCOMP_POLSTDATE = new Date(this.FGQH_QUOTATCOMP_POLSTDATE);
                                    var day = ('0' + _FGQH_QUOTATCOMP_POLSTDATE.getDate()).slice(-2);
                                    var month = ('0' + _FGQH_QUOTATCOMP_POLSTDATE.getMonth()).slice(-2);
                                    month = Number(month) + 1;
                                    if (month < 10)
                                        month = '0' + month.toString();
                                    var _FGQH_QUOTATCOMP_POLSTDATE = _FGQH_QUOTATCOMP_POLSTDATE.getFullYear() + "-" + (month) + "-" + (day);

                                    var _FGQH_QUOTATCOMP_POLENDATE = new Date(this.FGQH_QUOTATCOMP_POLENDATE);
                                    var day = ('0' + _FGQH_QUOTATCOMP_POLENDATE.getDate()).slice(-2);
                                    var month = ('0' + _FGQH_QUOTATCOMP_POLENDATE.getMonth()).slice(-2);
                                    month = Number(month) + 1;
                                    if (month < 10)
                                        month = '0' + month.toString();
                                    var _FGQH_QUOTATCOMP_POLENDATE = _FGQH_QUOTATCOMP_POLENDATE.getFullYear() + "-" + (month) + "-" + (day);


                                    var _FGQH_QUOTATCOMP_AGECALCDT = new Date(this.FGQH_QUOTATCOMP_AGECALCDT);
                                    var day = ('0' + _FGQH_QUOTATCOMP_AGECALCDT.getDate()).slice(-2);
                                    var month = ('0' + _FGQH_QUOTATCOMP_AGECALCDT.getMonth()).slice(-2);
                                    month = Number(month) + 1;
                                    if (month < 10)
                                        month = '0' + month.toString();
                                    var _FGQH_QUOTATCOMP_AGECALCDT = _FGQH_QUOTATCOMP_AGECALCDT.getFullYear() + "-" + (month) + "-" + (day);

                                    var _FGQH_QUOTATCOMP_FCLTKOVR_DT = new Date(this.FGQH_QUOTATCOMP_FCLTKOVR_DT);
                                    var day = ('0' + _FGQH_QUOTATCOMP_FCLTKOVR_DT.getDate()).slice(-2);
                                    var month = ('0' + _FGQH_QUOTATCOMP_FCLTKOVR_DT.getMonth()).slice(-2);
                                    month = Number(month) + 1;
                                    if (month < 10)
                                        month = '0' + month.toString();
                                    var _FGQH_QUOTATCOMP_FCLTKOVR_DT = _FGQH_QUOTATCOMP_FCLTKOVR_DT.getFullYear() + "-" + (month) + "-" + (day);


                                    var _FGQH_QUOTATCOMP_POLBAKDATE = new Date(this.FGQH_QUOTATCOMP_POLBAKDATE);
                                    var day = ('0' + _FGQH_QUOTATCOMP_POLBAKDATE.getDate()).slice(-2);
                                    var month = ('0' + _FGQH_QUOTATCOMP_POLBAKDATE.getMonth()).slice(-2);
                                    month = Number(month) + 1;
                                    if (month < 10)
                                        month = '0' + month.toString();
                                    var _FGQH_QUOTATCOMP_POLBAKDATE = _FGQH_QUOTATCOMP_POLBAKDATE.getFullYear() + "-" + (month) + "-" + (day);


                                    $("#FGQH_QUOTATHDR_ID").val(this.FGQH_QUOTATHDR_ID);
                                    $("#FGQH_QUOTATHDR_CODE").val(this.FGQH_QUOTATHDR_CODE);
                                    $("#FGQH_PFREQ_FSCD_DID").val(this.FGQH_PFREQ_FSCD_DID);
                                    $("#FGQH_QUOTATION_DATE").val(_FGQH_QUOTATION_DATE);
                                    $("#FGQH_QUOTATION_REQDATE").val(_FGQH_QUOTATION_REQDATE);
                                    $("#FGQH_QUOTATION_EXPDATE").val(_FGQH_QUOTATION_EXPDATE);
                                    $("#FGQH_QUOTATION_CONFIRM").val(this.FGQH_QUOTATION_CONFIRM);
                                    $("#FSPM_PRODUCT_ID").val(this.FSPM_PRODUCT_ID);
                                    $("#FGQH_QUOTATHDR_ID").val(this.FGQH_QUOTATHDR_ID);
                                    $("#FSPM_PRODUCT_ID_").val(this.FSPM_PRODUCT_ID);
                                    $("#FGQH_QUOTATHDR_ID_").val(this.FGQH_QUOTATHDR_ID);
                                    get_sbu();
                                    $("#FSLO_LOCATION_ID").val(this.FSLO_LOCATION_ID);
                                    SetLocation();
                                    $("#FSLO_LOCATION_ID2").val(this.FSLO_LOCATION_ID2);
                                    $("#FGQH_QUOTATION_INTRONAME").val(this.FGQH_QUOTATION_INTRONAME);
                                    $("#FGQH_QUOTATION_TOTALEMP").val(this.FGQH_QUOTATION_TOTALEMP);
                                    $("#FGQH_QUOTATION_PEREMP").val(this.FGQH_QUOTATION_PEREMP);
                                    $("#FGQH_QUOTATION_CONTNAME").val(this.FGQH_QUOTATION_CONTNAME);
                                    $("#FGQH_QUOTATION_PERSNAME").val(this.FGQH_QUOTATION_PERSNAME);
                                    $("#FGQH_QUOTATION_SVCTAX_YN").val(this.FGQH_QUOTATION_SVCTAX_YN);
                                    $("#FGQH_QUOTATION_SVCTAX_PERC").val(this.FGQH_QUOTATION_SVCTAX_PERC);
                                    $("#FSCR_CURRENCY_CODE").val(this.FSCR_CURRENCY_CODE);
                                    $("#FGQH_PYMET_FSCD_DID").val(this.FGQH_PYMET_FSCD_DID);
                                    $("#FGQH_QUOTATCOMP_TERM").val(this.FGQH_QUOTATCOMP_TERM);
                                    $("#FGQH_QUOTATCOMP_POLSTDATE").val(_FGQH_QUOTATCOMP_POLSTDATE);
                                    $("#FGQH_QUOTATCOMP_POLENDATE").val(_FGQH_QUOTATCOMP_POLENDATE);
                                    $("#FGQH_QUOTATCOMP_AGECALCDT").val(_FGQH_QUOTATCOMP_AGECALCDT);
                                    $("#FGQH_QUOTATCOMP_FCLTKOVR_YN").val(this.FGQH_QUOTATCOMP_FCLTKOVR_YN);
                                    $("#FGQH_QUOTATCOMP_FCLTKOVR_DT").val(_FGQH_QUOTATCOMP_FCLTKOVR_DT);
                                    $("#FSLO_LOCATION_ID3").val(this.FSLO_LOCATION_ID3);
                                    $("#FSLO_LOCATION_ID4").val(this.FSLO_LOCATION_ID4);
                                    $("#FGQH_QUOTATCOMP_POLBKDATD_YN").val(this.FGQH_QUOTATCOMP_POLBKDATD_YN);
                                    $("#FGQH_QUOTATCOMP_POLBAKDATE").val(_FGQH_QUOTATCOMP_POLBAKDATE);
                                    $("#FGQH_REASON_BKDATE").val(this.FGQH_REASON_BKDATE);
                                    $("#FGQH_QUOTATCOMP_HEADCOUNT_YN").val(this.FGQH_QUOTATCOMP_HEADCOUNT_YN);
                                    $("#FGQH_QUOTATCOMP_HDCNT_CRTRIA").val(this.FGQH_QUOTATCOMP_HDCNT_CRTRIA);
                                    $("#FGQH_STATUS").val(this.FGQH_STATUS);
                                    $("#FGQH_WAKALA_PERC").val(this.FGQH_WAKALA_PERC);
                                    $("#FGQH_QUOTATION_SVCTAX_PERC").val($("#FGQH_PFREQ_FSCD_DID option:selected").text());
                                    sessionStorage.setItem('FGQH_QUOTATHDR_ID', this.FGQH_QUOTATHDR_ID);

                                    var itr = 0;
                                    var itr1 = 0;
                                    var Status = '';

                                    $.ajax({
                                        "async": false,
                                        "crossDomain": true,
                                        url: "http://" + Result_API + "/api/GlobalParameters/GetGlobalParamByCategory/QTGRC",
                                        type: "GET",
                                        contentType: "application/json; charset=utf-8",
                                        datatype: JSON,
                                        timeout: 5000,
                                        //cache: false,
                                        success: function (result3) {
                                            for (var i = 0; i < result3.length; i++) {
                                                opsht += '<option value="' + result3[i].PARAM_VALUE + '">' + result3[i].PARAM_NAME + '</option>';
                                            }
                                        },
                                        error: function (result3) { }
                                    });
                                    $("#CompanyRow").val(itr);

                                    $.ajax({
                                        "async": false,
                                        "crossDomain": true,
                                        url: "http://" + Result_API + "/api/QuotCompyGrpDetl/GetQuotCompyGrpDetlDetails/" + $("#FGQH_QUOTATHDR_ID").val(),
                                        type: "GET",
                                        cache: false,
                                        contentType: "application/json; charset=utf-8",
                                        datatype: JSON,
                                        timeout: 5000,
                                        success: function (data) {
                                            $('#TableId tbody').empty();
                                            if ($("#TableId tbody").length == 0) {
                                                $("#TableId").append("<tbody></tbody>");
                                            }
                                            for (var i = 0; i < data.length; i++) {
                                                if (i <= 0) {
                                                    $("#TableId tbody").append("<tr><td class= 'text-white' style = 'font-weight:bold' >Category</td >" +
                                                        "<td class='text-white' style='font-weight:bold'>Sum Covered Criteria</td>" +
                                                        "<td class='text-white' style='font-weight:bold'>Flat Sum Covered</td>" +
                                                        "<td class='text-white' style='font-weight:bold'>No. of Salary Multiple</td>" +
                                                        "<td class='text-white' style='font-weight:bold'>Min Sum Covered</td>" +
                                                        "<td class='text-white' style='font-weight:bold'>Max Sum Covered</td>" +
                                                        "<td class='text-white' style='font-weight:bold'>Contribution</td>" +
                                                        "<td class='text-white' style='font-weight:bold'>Head Cont</td>" +
                                                        "<td class='text-white' style='font-weight:bold'>Sum Covered</td>" +
                                                        "<td class='text-white' style='font-weight:bold'>Status</td>" +
                                                        "<td class='text-white' style='font-weight:bold'>Rider</td > " +
                                                        "<td class='text-white' style='font-weight:bold'>Delete Info</td > ");
                                                }
                                                //alert("Catg.."+opsht)
                                                $("#TableId tbody").append("<tr>" +
                                                    "<td ><select class='form-select' style='width:250px;'  name='FGQH_QTGRC_FSCD_DID' id='FGQH_QTGRC_FSCD_DID" + itr + "'><option value=''>--Select--</option>" + opsht + "</select></td>" +
                                                    "<td ><select class='form-select' style='width:160px;' onchange='criteriaSelect(this.id,this.value)' name='FGQG_SUMASSRD_CRITRIA' id='FGQG_SUMASSRD_CRITRIA" + itr + "'>" + data[i].FGQG_SUMASSRD_CRITRIA + "<option value='1'>Manual</option> <option value='2'>Flat</option><option value='3'>Salary Multiple</option></select></td>" +
                                                    "<td ><input class='form-control input-sm' style='width:120px;'  name='FGQG_FIXED_AMOUNT' id='FGQG_FIXED_AMOUNT" + itr + "' value = '" + data[i].FGQG_FIXED_AMOUNT + "'></td>" +
                                                    "<td ><input class='form-control' style='width:160px;'  name='FGQG_NOOFSALARY_AMT' id='FGQG_NOOFSALARY_AMT" + itr + "' value = '" + data[i].FGQG_NOOFSALARY_AMT + "'></td>" +
                                                    "<td ><input class='form-control input-sm' style='width:150px;'  name='FGQG_MIN_SUMASSURD' id='FGQG_MIN_SUMASSURD" + itr + "' value = '" + data[i].FGQG_MIN_SUMASSURD + "' ></td>" +
                                                    "<td ><input class='form-control input-sm' style='width:160px;'  name='FGQG_MAX_SUMASSURD' id='FGQG_MAX_SUMASSURD" + itr + "' value = '" + data[i].FGQG_MAX_SUMASSURD + "' ></td>" +
                                                    "<td ><input class='form-control' style='width:120px;'  name='FGQG_PREMIUM' id='FGQG_PREMIUM" + itr + "' value = '" + data[i].FGQG_PREMIUM + "' ></td>" +
                                                    "<td ><input class='form-control input-sm' style='width:120px;'  name='FGQG_HEADCONT_TOTSALARY' id='FGQG_HEADCONT_TOTSALARY" + itr + "' value = '" + data[i].FGQG_HEADCONT_TOTSALARY + "'></td>" +
                                                    "<td ><select class='form-select' style='width:160px;'  name='FGQG_PER_FREQNCY' id='FGQG_PER_FREQNCY" + itr + "'><option value=''>---Select---</option> <option value='1000'>Per Milli</option> <option value='100'>Per Handred</option></select></td>" +
                                                    "<td ><select class='form-select' style='width:120px;'  name='FGQG_STATUS' id='FGQG_STATUS" + itr + "'>" + data[i].FGQG_STATUS + "<option value='Y'>Yes</option><option value='N'>NO</option></select></td>" +
                                                    "<td ><select class='form-select' style='width:120px;' onchange='getModal(this,this.id)' name='ShowModelDDL' id='ShowModelDDL" + itr + "' ><option>Select</option> <option value='1'>Rider</option> <option value='2'>Event</option></select>" +
                                                    //"<td><button type='button' class='form-control' style='width:60px;' name='BtnComQuoDelete' id='BtnComQuoDelete" + itr + "' > X</button>" +
                                                    "<td ><button type='button' class='form-control' height ='50px;' width='60px;' name='BtnComQuoDelete' id='BtnComQuoDelete" + itr + "' > <i class='fa fa-trash'></i> </button>" +
                                                    "<input class='form-control' style='width:10px;' hidden='hidden' name='FGQG_COMPGRP_ID' id='FGQG_COMPGRP_ID" + itr + "' value = '" + data[i].FGQG_COMPGRP_ID + "'></td>" +
                                                    "</tr>");
                                                //$("#FGQH_QTGRC_FSCD_DID" + itr).val(opsht);
                                                $("#FGQH_QTGRC_FSCD_DID" + itr).val(data[i].FGQH_QTGRC_FSCD_DID);
                                                $("#FGQG_PER_FREQNCY" + itr).val(data[i].FGQG_PER_FREQNCY);
                                                $("#FGQG_SUMASSRD_CRITRIA" + itr).val(data[i].FGQG_SUMASSRD_CRITRIA);
                                                $("#FGQG_STATUS" + itr).val(data[i].FGQG_STATUS);
                                                itr += 1;

                                                var totalRowCount = 0;
                                                var rowCount = 0;
                                                var table = document.getElementById("TableId");
                                                var rows = table.getElementsByTagName("tr")
                                                for (var y = 0; y < rows.length; y++) {
                                                    totalRowCount++;
                                                    if (rows[y].getElementsByTagName("td").length > 0) {
                                                        rowCount++;
                                                    }
                                                }
                                                if (totalRowCount > 0) {

                                                    itr = totalRowCount - 1;
                                                }
                                                $("#CompanyRow").val(itr);
                                            }
                                        },
                                        error: function (data) { }
                                    });

                                    $.ajax({
                                        "async": false,
                                        "crossDomain": true,
                                        url: "http://" + Result_API + "/api/Quotation/GetAgentList",
                                        type: "GET",
                                        contentType: "application/json; charset=utf-8",
                                        datatype: JSON,
                                        timeout: 5000,
                                        //cache: false,
                                        success: function (result2) {
                                            for (var i = 0; i < result2.length; i++) {
                                                opsht1 += '<option value="' + result2[i].FSAG_AGENT_CODE + '">' + result2[i].FSAG_AGENT_CODE + '</option>';

                                            }
                                            //alert("Agent Code...loop" + opsht1)
                                        },
                                        error: function (data2) { }
                                    });

                                    $.ajax({
                                        "async": false,
                                        "crossDomain": true,
                                        url: "http://" + Result_API + "/api/QuotAgentDetl/GetQuotAgentDetl/" + $("#FGQH_QUOTATHDR_ID").val(),
                                        type: "GET",
                                        cache: false,
                                        contentType: "application/json; charset=utf-8",
                                        datatype: JSON,
                                        timeout: 5000,
                                        success: function (data1) {
                                            $('#TableIdAgent tbody').empty();
                                            if ($("#TableIdAgent tbody").length == 0) {
                                                $("#TableIdAgent").append("<tbody></tbody>");
                                            }

                                            for (var i = 0; i < data1.length; i++) {

                                                if (i <= 0) {
                                                    $("#TableIdAgent tbody").append("<tr> " +
                                                        "<td style='width:25%' class='text-white' style='font-weight:bold' >Agent Code</td > " +
                                                        "<td style='width:25%' class='text-white' style='font-weight:bold' >Agent Name</td >" +
                                                        "<td style='width:10%' class='text-white' style='font-weight:bold' >Agent Designation</td > " +
                                                        "<td style='width:10%' class='text-white' style='font-weight:bold' >Agent Channel</td > " +
                                                        "<td style='width:10%' class='text-white' style='font-weight:bold' >Agent Commission%</td > " +
                                                        "<td style='width:10%' class='text-white' style='font-weight:bold' >Agent Commission Wakala%</td > " +
                                                        "<td style='width:10%' class='text-white' style='font-weight:bold'>Status</td>" +
                                                        "<td style='width:10%' class='text-white' style='font-weight:bold'>Delete Info</td>" +
                                                        "</tr>");
                                                }
                                                //alert("Agent Code..."+opsht1)
                                                $("#TableIdAgent tbody").append("<tr>" +
                                                    "<td style='width:25%'><select class='form-select' style='width:100%;'  onchange='SetAgent(this.id,this.value)' name='FSAG_AGENT_CODE' id='FSAG_AGENT_CODE" + itr1 + "'><option value=''>--Select--</option>" + opsht1 + "</select></td>" +
                                                    "<td style='width:25%'><input class='form-control input-sm' style='width:100%;' readonly name='FSAG_AGENT_NAME' id='FSAG_AGENT_NAME" + itr1 + "' value = '" + data1[i].FSAG_AGENT_NAME + "' ></td>" +
                                                    "<td style='width:10%'><input class='form-control input-sm' style='width:100%;' readonly name='FSDS_DESIGN_ID' id='FSDS_DESIGN_ID" + itr1 + "' value = '" + data1[i].FSDS_DESIGN_ID + "'></td>" +
                                                    "<td style='width:10%'><input class='form-control input-sm' style='width:100%;' readonly name='FSAG_CHNLS_FSCD_DID' id='FSAG_CHNLS_FSCD_DID" + itr1 + "' value = '" + data1[i].FSAG_CHNLS_FSCD_DID + "'></td>" +
                                                    "<td style='width:10%'><input class='form-control input-sm' style='width:100%;' name='FGQA_COMMISSION_PERCENT' id='FGQA_COMMISSION_PERCENT" + itr1 + "' value = '" + data1[i].FGQA_COMMISSION_PERCENT + "'></td>" +
                                                    "<td style='width:10%'><input class='form-control input-sm' style='width:100%;' name='FGQA_WAKALA_ONPREM' id='FGQA_WAKALA_ONPREM" + itr1 + "' value = '" + data1[i].FGQA_WAKALA_ONPREM + "'></td>" +
                                                    "<td style='width:30%'><input class='form-control' style = 'width:100%;' readonly name='FSAG_STATUS' id='FSAG_STATUS" + itr1 + "' value = '" + data1[i].FGQA_STATUS + "'></td>" +
                                                    //"<td><img class='static_trash' center id ='Ins_static_btn" + itr1 + "' src='/Assets/img/photos/trashbin.png' alt='' width='50' height='55' style='color:white'/>" +
                                                    "<td ><button type='button' class='form-control' height ='50px;' width='60px;' name='BtnAgentDelete' id='BtnAgentDelete" + itr1 + "' > <i class='fa fa-trash'></i> </button>" +
                                                    "<input class='form-control' style = 'width:10%;' hidden='hidden' name='FGQA_COMPAGNT_ID' id='FGQA_COMPAGNT_ID" + itr1 + "' value = '" + data1[i].FGQA_COMPAGNT_ID + "'></td>" +
                                                    "</tr>");
                                                $("#FSAG_AGENT_CODE" + itr1).val(data1[i].FSAG_AGENT_CODE);
                                                itr1 += 1;

                                                var totalRowCount = 0;
                                                var rowCount = 0;
                                                var table = document.getElementById("TableIdAgent");
                                                var rows = table.getElementsByTagName("tr")
                                                for (var x = 0; x < rows.length; x++) {
                                                    totalRowCount++;
                                                    if (rows[x].getElementsByTagName("td").length > 0) {
                                                        rowCount++;
                                                    }
                                                }
                                                if (totalRowCount > 0) {
                                                    itr1 = totalRowCount - 1;
                                                }
                                                $("#AgentRow").val(itr1);
                                            }
                                        },
                                        error: function (data) { }
                                    });
                                });
                            } else {
                                if (confirm("Quotation Code doesn't exist. Do You Want to Add New Quotation ?")) {
                                    var go_to_url = "http://" + Result_Front + "/Quotation";
                                    document.location.href = go_to_url;
                                }
                            }
                        },
                        error: function (jqXhr, textStatus, errorMessage) { // error callback
                            alert('error, Counld not found Result as provided parameter.' + errorMessage);
                        }
                    }
                );
                $(".spinner-box").attr("hidden", true)
            }, 2000)
        });
    });
</script>

<script type="text/javascript">

    $(document).ready(function () {
        $("#FGQH_QUOTATION_REQDATE").change(function () {
            var FGQH_QUOTATION_REQDATE = $('#FGQH_PFREQ_FSCD_DID').find(":selected").attr('value');
            $("#FGQH_QUOTATION_EXPDATE").val($(this).find('option:selected').text());
        });
    });

    $(document).ready(function () {
        $('form input').keydown(function (event) {
            if (event.keyCode == 13) {
                event.preventDefault();
                return false;
            }
        });

        $('#SaveUpdateQuotation').click(function (e) {
            var txtFormIssues = '';
            var IsFormValid = false;

            var table = document.getElementById("TableIdAgent");
            var rows = table.getElementsByTagName("tr")

            var inputs = document.getElementsByName("FGQA_COMMISSION_PERCENT");
            const FGQA_COMMISSION_PERCENT = [];

            for (let i = 0; i < inputs.length; i++) {
                FGQA_COMMISSION_PERCENT.push(parseInt(inputs[i].value));
            }

            var inputs_ = document.getElementsByName("FGQA_WAKALA_ONPREM");
            const FGQA_WAKALA_ONPREM = [];

            for (let j = 0; j < inputs_.length; j++) {
                FGQA_WAKALA_ONPREM.push(parseInt(inputs_[j].value));
            }

            if (FGQA_COMMISSION_PERCENT > 100) {
                alert("You can not assign Agent Commission percentage more than 100.");
                IsFormValid = false;
            } else //{ IsFormValid = true; }


                if (FGQA_WAKALA_ONPREM > 100) {
                    alert("You can not assign wakala premium percentage more than 100.");
                    IsFormValid = false;
                } else { IsFormValid = true; }
            //return IsFormValid;

            if ($('#FGQH_PFREQ_FSCD_DID').val() == '') {
                alert('Quotation Mode/Type not entered.\n');
                IsFormValid = false;
            } else if ($('#FGQH_QUOTATION_DATE').val() == '') {
                alert('Quotation date not entered\n');
                IsFormValid = false;
            } else if ($('#FGQH_QUOTATION_REQDATE').val() == '') {
                alert('Quotation End date not entered\n');
                IsFormValid = false;
            } else if ($('#FGQH_QUOTATION_DATE').val() > $('#FGQH_QUOTATION_REQDATE').val()) {
                alert('Quotation date Can not be greater than End date\n');
                IsFormValid = false;
            } else if ($('#FGQH_QUOTATION_CONFIRM').val() == '') {
                alert('Quotation Confirmed not entered\n');
                IsFormValid = false;
            } else if ($('#FSPM_PRODUCT_ID').val() == '') {
                alert('Quotation Plan not entered\n');
                IsFormValid = false;
            } else if ($('#FGQH_QUOTATION_INTRONAME').val() == '') {
                alert('Interducer Name not entered\n');
                IsFormValid = false;
            } else if ($('#FGQH_QUOTATION_TOTALEMP').val() == '') {
                alert('Total Emplyee not entered\n');
                IsFormValid = false;
                //} else if ($('#FGQH_QUOTATION_PEREMP').val() == '') {
                //    alert('Per Emplyeey not entered\n');
                //    IsFormValid = false;
            } else if ($('#FGQH_QUOTATION_CONTNAME').val() == '') {
                alert('Contact Name not entered\n');
                IsFormValid = false;
            } else if ($('#FGQH_QUOTATION_PERSNAME').val() == '') {
                alert('Contact Person Name not entered\n');
                IsFormValid = false;
            } else if ($('#FGQH_QUOTATION_SVCTAX_YN').val() == '') {
                alert('Service Tax Apply not entered\n');
                IsFormValid = false;
            } else if ($('#FSCR_CURRENCY_CODE').val() == '') {
                alert('Currency not entered\n');
                IsFormValid = false;
            } else if ($('#FGQH_PYMET_FSCD_DID').val() == '') {
                alert('Payment Method not entered\n');
                IsFormValid = false;
            } else if ($('#FGQH_QUOTATCOMP_TERM').val() == '') {
                alert('Term not entered\n');
                IsFormValid = false;
            } else if ($('#FGQH_QUOTATCOMP_POLSTDATE').val() == '') {
                alert('Policy Start Date not entered\n');
                IsFormValid = false;
            } else if ($('#FGQH_QUOTATCOMP_POLENDATE').val() == '') {
                alert('Policy End Date not entered\n');
                IsFormValid = false;
            } else if ($('#FGQH_QUOTATCOMP_POLENDATE').val() < $('#FGQH_QUOTATCOMP_POLSTDATE').val()) {
                alert('Policy End Date Can not be greater than Policy Start \n');
                IsFormValid = false;
            } else if ($('#FGQH_QUOTATCOMP_AGECALCDT').val() == '') {
                alert('Age Calculation Date not entered\n');
                IsFormValid = false;
                //} else if ($('#FGQH_REASON_BKDATE').val() == '') {
                //    alert('Resaon Back Dated not entered\n');
                //    IsFormValid = false;
            } else if ($('#FGQH_QUOTATCOMP_HEADCOUNT_YN').val() == '') {
                alert('Head Count Flag Y/N not entered\n');
                IsFormValid = false;
            } else {
                IsFormValid = true;
                $("#saving_spinner").removeAttr("hidden", true);
            }

            return IsFormValid;
        });
    });

</script>
<script type="text/javascript">

    $(document).ready(function () {
        $("#FGQH_QUOTATCOMP_FCLTKOVR_YN").change(function () {
            var x = $(this).val();
            if (x === 'N') {
                $("#FGQH_QUOTATCOMP_FCLTKOVR_DT").attr("readOnly", "true");
            }
            if (x === 'Y') {
                $("#FGQH_QUOTATCOMP_FCLTKOVR_DT").attr("readOnly", false);
            }
        });
    });

    $(document).ready(function () {
        $("#FGQH_QUOTATCOMP_POLBKDATD_YN").change(function () {
            var x = $(this).val();
            if (x === '2') {
                $("#FGQH_QUOTATCOMP_POLBAKDATE").attr("readOnly", "true");
                $("#FGQH_REASON_BKDATE").attr("readOnly", "true");
            }

            if (x === '1') {
                $("#FGQH_QUOTATCOMP_POLBAKDATE").attr("readOnly", false);
                $("#FGQH_REASON_BKDATE").attr("readOnly", false);
            }
        });
    });

    $(document).ready(function () {
        $("#FGQH_QUOTATCOMP_HEADCOUNT_YN").change(function () {
            var x = $(this).val();
            if (x === '2') {
                $("#FGQH_QUOTATCOMP_HDCNT_CRTRIA").attr("disabled", "disabled");
            }
            var x = $(this).val();
            if (x === '1') {
                $("#FGQH_QUOTATCOMP_HDCNT_CRTRIA").attr("disabled", false);
            }

        });
    });

    $(function () {
        $('#FGQH_QUOTATION_REQDATE').change(function () {

            var date = this.value;
            var now = new Date(date);
            year = now.getFullYear();
            month = now.getMonth() + 1;
            dt = now.getDate() + 1;

            if (dt < 10) {
                dt = '0' + dt;
            }
            if (month < 10) {
                month = '0' + month;
            }
            var res = year + '-' + month + '-' + dt;
            $('#FGQH_QUOTATION_EXPDATE').val(res);
        });
    });
</script>
<form method="post" action="/New_Business/SaveUpdateQuotation" class="form-horizontal">
    @Html.AntiForgeryToken()
    @*<main class="content">
        <div class="container-fluid p-0">*@
    <div class="card">
        <div class="card-body">
            <div class="row mt-3">
                <h1 class="card-title" style="font-weight: 600; font-size: 1.3rem; font-weight: bold ">
                    Quotation Registration
                </h1>
            </div>
            <div class="row">
                <div class="col-md-3">
                    <label class="text-white" for="QuotationSearch" style="font-weight:bold">Quotation Search:</label>
                </div>
                <div class="input-group">
                    <button class="btn btn-secondary" type="button" name="btnQuotSesarch" id="btnQuotSearch" onclick="btnQuotSearch" value="Search ">Go!</button>
                    <input type="text" name="FSPM_PRODUCT_CODESER" id="FSPM_PRODUCT_CODESER" style="width:50%" placeholder="QT100000002" class="form-control">
                </div>
                <div class="col-md-4">
                    @if (TempData["Quotation"] != null)
                    {<div class="alert alert-success alert-dismissible fade show" role="alert">
                            <strong>
                                Success
                            </strong> @TempData["Quotation"]
                        </div>}
                </div>
                <div>
                    <input class="form-control" name="FGQH_QUOTATHDR_ID" id="FGQH_QUOTATHDR_ID" hidden="hidden"
                           value="0" type="number">
                    <input class="form-control" name="FSPM_PRODUCT_ID_" id="FSPM_PRODUCT_ID_" hidden="hidden" value='"+sessionStorage.getItem(' FSPM_PRODUCT_ID');+"'
                           type="number">
                    <input class="form-control" name="FGQH_QUOTATHDR_ID_" id="FGQH_QUOTATHDR_ID_" hidden="hidden"
                           type="number">

                    <input class="form-control" name="FGQG_COMPGRP_ID" id="FGQG_COMPGRP_ID" hidden="hidden"
                           type="number">
                    <input class="form-control" name="CompanyRow" id="CompanyRow" hidden="hidden">
                    <input class="form-control" name="AgentRow" id="AgentRow" hidden="hidden">
                </div>
            </div>
        </div>
        <!--</div>-->@*Ended Search Option*@

        <!--<div class="card">-->
        <div class="col-12 col-lg-12">
            <div class="tab tab-primary">
                <ul class="nav nav-tabs" role="tablist">
                    <li class="nav-item"><a class="nav-link active" id="btnQuotationInfor" href="#primary-tab-1" data-bs-toggle="tab" role="tab" style="font-weight:bold">Quotation Information</a></li>
                    <li class="nav-item"><a class="nav-link" id="btnCompanyInfor" href="#primary-tab-2" data-bs-toggle="tab" role="tab" style="font-weight:bold">Technical Details</a></li>
                    <li class="nav-item"><a class="nav-link" id="btnAgentInfor" href="#primary-tab-3" data-bs-toggle="tab" role="tab" style="font-weight:bold">Agent Details</a></li>
                    <li class="nav-item"><a class="nav-link" id="btnFileUpload" href="#primary-tab-4" data-bs-toggle="tab" role="tab" style="font-weight:bold">File Upload</a></li>
                </ul>

                <div class="tab-content">
                    <div class="tab-pane active" id="primary-tab-1" role="tabpanel">
                        <div class="row">
                            <div class="mb-2 col-md-3">
                                <label class="text-white" for="FGQH_QUOTATHDR_CODE" style="font-weight:bold">Quotation Code:</label>
                                <input class="form-control" placeholder="Quotation Code" name="FGQH_QUOTATHDR_CODE" id="FGQH_QUOTATHDR_CODE" readonly
                                       value="@TempData["FGQH_QUOTATHDR_ID"]" type="text">
                            </div>
                            <div class="mb-2 col-md-3">
                                <label class="text-white" for="FGQH_PFREQ_FSCD_DID" style="font-weight:bold">Quotation Type/Mode:<span class="bg-red">  *</span></label>
                                <select class="form-select" name="FGQH_PFREQ_FSCD_DID" id="FGQH_PFREQ_FSCD_DID">
                                    <option value="">--Select--</option>
                                </select>
                            </div>
                            <div class="mb-2 col-md-3">
                                <label class="text-white" for="FGQH_QUOTATION_DATE" style="font-weight:bold">Quotation Date:<span class="bg-red">  *</span></label>
                                <input class="datefield form-control" name="FGQH_QUOTATION_DATE" id="FGQH_QUOTATION_DATE" data-val="true"
                                       type="date" />
                            </div>
                            <div class="mb-2 col-md-3">
                                <label class="text-white" for="FGQH_QUOTATION_REQDATE" style="font-weight:bold">End Date:<span class="bg-red">  *</span></label>
                                <input class="datefield form-control" name="FGQH_QUOTATION_REQDATE" id="FGQH_QUOTATION_REQDATE" onchange="funchange(this)" data-val="true" type="date" />
                            </div>
                        </div>@*Ended Customer Basic Information 1st Phase*@
                        <div class="row">
                            <div class="mb-2 col-md-3">
                                <label class="text-white" for="FGQH_QUOTATION_EXPDATE" style="font-weight:bold">Quotation Expiry Date:</label>
                                <input class="datefield form-control" readonly name="FGQH_QUOTATION_EXPDATE" id="FGQH_QUOTATION_EXPDATE" type="date" />
                            </div>
                            <div class="mb-2 col-md-3">
                                <label class="text-white" for="FGQH_QUOTATION_CONFIRM" style="font-weight:bold">Quotation Confirmed:<span class="bg-red">  *</span></label>
                                <select class="form-select" name="FGQH_QUOTATION_CONFIRM" id="FGQH_QUOTATION_CONFIRM">
                                    <option value="">--Select--</option>
                                    <option value="Y">Yes</option>
                                    <option value="N">No</option>
                                    <option value="C">Confirmed</option>
                                </select>
                            </div>
                            <div class="mb-2 col-md-3">
                                <label class="text-white" for="FSPM_PRODUCT_ID" style="font-weight:bold">Policy Plan:<span class="bg-red">  *</span></label>
                                <select class="form-select" name="FSPM_PRODUCT_ID" id="FSPM_PRODUCT_ID" onchange="get_sbu()">
                                    <option value="">--Select--</option>
                                </select>
                            </div>
                            <div class="mb-2 col-md-3">
                                <label for="FSPM_PRODUCT_DESP" class="text-white" style="font-weight:bold">Plan Description:</label>
                                <input class="form-control" type="text" placeholder="Plan Description" name="FSPM_PRODUCT_DESP" id="FSPM_PRODUCT_DESP"
                                       maxlength="30" readonly>
                            </div>
                        </div>@*Ended Customer Basic Information 2nd Phase*@

                        <div class="row">
                            <div class="mb-2 col-md-3">
                                <label class="text-white" for="FSLO_LOCATION_ID" style="font-weight:bold">Company:<span class="bg-red">  *</span></label>
                                <select class="form-select" name="FSLO_LOCATION_ID" id="FSLO_LOCATION_ID" onchange="SetLocation()">
                                    <option value="">--Select--</option>
                                </select>
                            </div>
                            <div class="mb-2 col-md-3">
                                <label class="text-white" for="FSLO_LOCATION_ID2" style="font-weight:bold">Company Branch:</label>
                                <select class="form-select" name="FSLO_LOCATION_ID2" id="FSLO_LOCATION_ID2">
                                </select>
                            </div>
                            <div class="mb-2 col-md-3">
                                <label for="FGQH_QUOTATION_INTRONAME" class="text-white" style="font-weight:bold">Introducer Name:<span class="bg-red">  *</span></label>
                                <input class="form-control" placeholder="Introducer Name" name="FGQH_QUOTATION_INTRONAME" id="FGQH_QUOTATION_INTRONAME" />
                            </div>
                            <div class="mb-2 col-md-3">
                                <label for="FGQH_QUOTATION_TOTALEMP" class="text-white" style="font-weight:bold">Total Employees:<span class="bg-red">  *</span></label>
                                <input class="form-control" placeholder="Total Employees" name="FGQH_QUOTATION_TOTALEMP" id="FGQH_QUOTATION_TOTALEMP"
                                       maxlength="50" />
                            </div>
                        </div>@*Ended Customer Basic Information 3rd Phase*@

                        <div class="row">
                            <div class="mb-2 col-md-3">
                                <label for="FGQH_QUOTATION_PEREMP" class="text-white" style="font-weight:bold">Per Employee:</label>
                                <input class="form-control" placeholder="Per Employee" name="FGQH_QUOTATION_PEREMP" id="FGQH_QUOTATION_PEREMP"
                                       maxlength="50" />
                            </div>
                            <div class="mb-2 col-md-3">
                                <label for="FGQH_QUOTATION_PERSNAME" class="text-white" style="font-weight:bold">Contact Person Name:<span class="bg-red">  *</span></label>
                                <input class="form-control" placeholder="Contact Person Name" name="FGQH_QUOTATION_PERSNAME" id="FGQH_QUOTATION_PERSNAME"
                                       maxlength="15" />
                            </div>

                            <div class="mb-2 col-md-3">
                                <label for="FGQH_QUOTATION_CONTNAME" class="text-white" style="font-weight:bold">Contact Person Occupation:<span class="bg-red">  *</span></label>
                                <input class="form-control" placeholder="Contact Person Occupation" name="FGQH_QUOTATION_CONTNAME" id="FGQH_QUOTATION_CONTNAME"
                                       maxlength="15" />
                            </div>

                            <div class="mb-2 col-md-3">
                                <label class="text-white" for="FGQH_QUOTATION_SVCTAX_YN" style="font-weight:bold">Service Tax Apply:</label>
                                <select class="form-select" name="FGQH_QUOTATION_SVCTAX_YN" id="FGQH_QUOTATION_SVCTAX_YN">
                                    <option value="">--Select--</option>
                                    <option value="Y">Yes</option>
                                    <option value="N">No</option>
                                </select>
                            </div>
                        </div>@*Ended Customer Basic Information 4th Phase*@
                    </div>
                    <div class="tab-pane" id="primary-tab-2" role="tabpanel">

                        <div class="row">
                            <div class="mb-2 col-md-3">
                                <label class="text-white" for="FGQH_QUOTATION_SVCTAX_PERC" style="font-weight:bold">Frequency:</label>
                                <input class="form-control" name="FGQH_QUOTATION_SVCTAX_PERC" id="FGQH_QUOTATION_SVCTAX_PERC" readonly
                                       type="text">
                            </div>
                            <div class="mb-2 col-md-3">
                                <label for="FSCR_CURRENCY_CODE" class="text-white" style="font-weight:bold">Currency:<span class="bg-red">  *</span></label>
                                @*<input class="form-control" placeholder="Currency $" name="FSCR_CURRENCY_CODE" id="FSCR_CURRENCY_CODE" />*@
                                <select class="form-select" name="FSCR_CURRENCY_CODE" id="FSCR_CURRENCY_CODE">
                                    <option value="">--Select--</option>
                                </select>
                            </div>
                            <div class="mb-2 col-md-3">
                                <label class="text-white" for="FGQH_PYMET_FSCD_DID" style="font-weight:bold">Payment Method:<span class="bg-red">  *</span></label>
                                <select class="form-select" name="FGQH_PYMET_FSCD_DID" id="FGQH_PYMET_FSCD_DID">
                                    <option value="">--Select--</option>
                                </select>
                            </div>
                            <div class="mb-2 col-md-3">
                                <label for="FGQH_QUOTATCOMP_TERM" class="text-white" style="font-weight:bold">Term:<span class="bg-red">  *</span></label>
                                <input class="form-control" placeholder="Term expl 1" name="FGQH_QUOTATCOMP_TERM" id="FGQH_QUOTATCOMP_TERM" value="1" readonly />
                            </div>
                        </div>@*Ended Customer Basic Information 4th Phase*@
                        <div class="row">
                            <div class="mb-2 col-md-3">
                                <label class="text-white" for="FGQH_QUOTATCOMP_POLSTDATE" style="font-weight:bold">Policy Start Date:<span class="bg-red">  *</span></label>
                                <input class="datefield form-control" name="FGQH_QUOTATCOMP_POLSTDATE" id="FGQH_QUOTATCOMP_POLSTDATE" data-val="true" data-val-required="Date is required"
                                       type="date" />
                            </div>
                            <div class="mb-2 col-md-3">
                                <label class="text-white" for="FGQH_QUOTATCOMP_POLENDATE" style="font-weight:bold">Policy End Date:<span class="bg-red">  *</span></label>
                                <input class="datefield form-control" name="FGQH_QUOTATCOMP_POLENDATE" id="FGQH_QUOTATCOMP_POLENDATE" data-val="true" data-val-required="Date is required"
                                       type="date" />
                            </div>
                            <div class="mb-2 col-md-3">
                                <label class="text-white" for="FGQH_QUOTATCOMP_AGECALCDT" style="font-weight:bold">Age Calculation Date:<span class="bg-red">  *</span></label>
                                <input class="datefield form-control" name="FGQH_QUOTATCOMP_AGECALCDT" id="FGQH_QUOTATCOMP_AGECALCDT" data-val="true" data-val-required="Date is required"
                                       type="date" />
                            </div>
                            <div class="mb-2 col-md-3">
                                <label class="text-white" for="FGQH_QUOTATCOMP_FCLTKOVR_YN" style="font-weight:bold">FCL Take Over:<span class="bg-red">  *</span></label>
                                <select class="form-select" name="FGQH_QUOTATCOMP_FCLTKOVR_YN" id="FGQH_QUOTATCOMP_FCLTKOVR_YN">
                                    <option value="">--Select--</option>
                                    <option value="Y">YES</option>
                                    <option value="N">NO</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="mb-2 col-md-3">
                                <label class="text-white" for="FGQH_QUOTATCOMP_FCLTKOVR_DT" style="font-weight:bold">FCL Take Date:</label>
                                <input class="datefield form-control" name="FGQH_QUOTATCOMP_FCLTKOVR_DT" id="FGQH_QUOTATCOMP_FCLTKOVR_DT" data-val="true" data-val-required="Date is required"
                                       type="date" />
                            </div>
                            <div class="mb-2 col-md-3">
                                <label class="text-white" for="FSLO_LOCATION_ID3" style="font-weight:bold">Company Branch:</label>
                                <select class="form-select" name="FSLO_LOCATION_ID3" id="FSLO_LOCATION_ID3">
                                </select>
                            </div>
                            <div class="mb-2 col-md-3">
                                <label class="text-white" for="" style="font-weight:bold">Servicing Branch:<span class="bg-red">  *</span></label>
                                <select class="form-select" name="" id="">
                                    <option value="">--Select--</option>
                                    <option value="1">Karachi Main Branch</option>
                                    <option value="2">Lahore Main Branch</option>
                                    <option value="3">Rawalpindi Branch</option>
                                    <option value="4">Sukkar Branch</option>
                                </select>
                            </div>
                            <div class="mb-2 col-md-3">
                                <label class="text-white" for="FGQH_QUOTATCOMP_POLBKDATD_YN" style="font-weight:bold">Policy Back Dated Y/N:<span class="bg-red">  *</span></label>
                                <select class="form-select" name="FGQH_QUOTATCOMP_POLBKDATD_YN" id="FGQH_QUOTATCOMP_POLBKDATD_YN">
                                    <option value="">--Select--</option>
                                    <option value="1">YES</option>
                                    <option value="2">NO</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="mb-2 col-md-3">
                                <label class="text-white" for="FGQH_QUOTATCOMP_POLBAKDATE" style="font-weight:bold">Policy Back Date:</label>
                                <input class="datefield form-control" name="FGQH_QUOTATCOMP_POLBAKDATE" id="FGQH_QUOTATCOMP_POLBAKDATE" data-val="true" data-val-required="Date is required"
                                       type="date" />
                            </div>
                            <div class="mb-2 col-md-3">
                                <label class="text-white" for="FGQH_REASON_BKDATE" style="font-weight:bold">Reason Back Dated:<span class="bg-red">  *</span></label>
                                <input class="form-control" placeholder="Reason Back Dated" name="FGQH_REASON_BKDATE" id="FGQH_REASON_BKDATE" maxlength="30"
                                       type="text">
                            </div>
                            <div class="mb-2 col-md-3">
                                <label class="text-white" for="FGQH_QUOTATCOMP_HEADCOUNT_YN" style="font-weight:bold">Head Count Flag:<span class="bg-red">  *</span></label>
                                <select class="form-select" name="FGQH_QUOTATCOMP_HEADCOUNT_YN" id="FGQH_QUOTATCOMP_HEADCOUNT_YN">
                                    <option value="">--Select--</option>
                                    <option value="1">YES</option>
                                    <option value="2">NO</option>
                                </select>
                            </div>
                            <div class="mb-2 col-md-3">
                                <label class="text-white" for="FGQH_QUOTATCOMP_HDCNT_CRTRIA" style="font-weight:bold">Head Count Criteria:</label>
                                <select class="form-select" name="FGQH_QUOTATCOMP_HDCNT_CRTRIA" id="FGQH_QUOTATCOMP_HDCNT_CRTRIA">
                                    <option value="">--Select--</option>
                                    <option value="1">Flat</option>
                                    <option value="2">Manual</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="mb-2 col-md-3">
                                <label class="text-white" for="FGQH_WAKALA_PERC" style="font-weight:bold">Wakala Fee:</label>
                                <input class="form-control" placeholder="Wakala Fee" name="FGQH_WAKALA_PERC" id="FGQH_WAKALA_PERC" />
                            </div>
                        </div>
                        <h4 class="mt-3" style="font-weight:bold">Benefits Details</h4>
                        <div class="card-body pt-0">
                            <div class="row">
                                <button class="btn btn-success" style="margin-right:0%; width:15%; text-align: center;" type="button"
                                        name="btnAddQuoComp" id="btnAddQuoComp">
                                    Add Category
                                </button>
                            </div>

                            <!--<div class="row">
                            <table-->
                            @*class="table table-responsive table-striped table-bordered table-hover"*@
                            <!--class="table table-bordered"
                                       id="TableId" style="width:100%;overflow:auto; max-height:100px;"
                                       align="center">
                                    <tr>
                                        <td class="text-white" style="font-weight:bold"> Group Code</td>
                                        <td class="text-white" style="font-weight:bold"> Premium</td>
                                        <td class="text-white" style="font-weight:bold"> Min covered</td>
                                        <td class="text-white" style="font-weight:bold"> Max covered</td>
                                        <td class="text-white" style="font-weight:bold"> Sum covered</td>
                                        <td class="text-white" style="font-weight:bold"> SA Creteria</td>
                                        <td class="text-white" style="font-weight:bold"> No of Sal. Amt</td>
                                        <td class="text-white" style="font-weight:bold"> Fix Amount</td>
                                        <td class="text-white" style="font-weight:bold"> H. C. T. Salary</td>
                                        <td class="text-white" style="font-weight:bold"> Status</td>
                                        <td class="text-white" style="font-weight:bold"> Rider</td>
                                    </tr>
                                </table>
                            </div>-->

                            <div class="row">
                                <div class="col-md-12" style="overflow-x:auto">
                                    <table @*class="table table-responsive table-striped table-bordered table-hover"*@ class="table table-bordered mt-3"
                                           id="TableId" style="width: 100%"
                                           align="center">
                                        @*<tr>
                                                <td class="text-white" style="font-weight: bold; width:50%">Group Code</td>
                                                <td class="text-white" style="font-weight: bold; width:25%">Premium</td>
                                                <td class="text-white" style="font-weight: bold; width:20%">Min covered</td>
                                                <td class="text-white" style="font-weight: bold; width:20%">Max covered</td>
                                                <td class="text-white" style="font-weight: bold; width:35%">Sum covered</td>
                                                <td class="text-white" style="font-weight: bold; width:35%">SA Creteria</td>
                                                <td class="text-white" style="font-weight: bold; width:20%">No of Salary Amount</td>
                                                <td class="text-white" style="font-weight: bold; width:25%">Fix Amount</td>
                                                <td class="text-white" style="font-weight: bold; width:25%">H. C. T. Salary</td>
                                                <td class="text-white" style="font-weight: bold; width:30%">Status</td>
                                                <td class="text-white" style="font-weight: bold; width:30%">Rider</td>
                                            </tr>*@
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="tab-pane" id="primary-tab-3" role="tabpanel">
                        <div class="row">
                            <div class="mb-2 col-md-6">
                                <button class="btn btn-success" style="margin-right:01%; width:25%; text-align: center;" type="button"
                                        name="btnAddAgent" id="btnAddAgent">
                                    Add Agent
                                </button>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12" style="overflow-x:auto">
                                <table @*class="table table-responsive table-striped table-bordered table-hover"*@ class="table table-bordered"
                                       id="TableIdAgent" style="width:100%"
                                       align="left">
                                    <tr>
                                        <td class="text-white" style="font-weight:bold">Agent Code</td>
                                        <td class="text-white" style="font-weight:bold">Agent Name</td>
                                        <td class="text-white" style="font-weight:bold">Agent Designation</td>
                                        <td class="text-white" style="font-weight:bold">Agent Channel</td>
                                        <td class="text-white" style="font-weight:bold">Agent Commission%</td>
                                        <td class="text-white" style="font-weight:bold">Agent Commission Wakala%</td>
                                        <td class="text-white" style="font-weight:bold">Status</td>
                                        <td class="text-white" style="font-weight:bold">Delete Info</td>
                                    </tr>
                                </table>

                            </div>
                        </div>
                        <div class="row">
                            <button class="btn btn-success mt-1" type="submit" style="margin-left:01%; width:07%; text-align: center;" id="SaveUpdateQuotation" name="SaveUpdateQuotation">Save</button>
                        </div>
                    </div>@*Ended Customer Basic Information 4th Phase*@

                    <div class="tab-pane" id="primary-tab-4" role="tabpanel">
                        <div class="container-fluid p-0">
                            <div>
                                <div class="row">
                                </div>
                            </div>
                            <div class="mb-3">
                                <h1 class="h3 d-inline align-middle">Customer File Uploading</h1>
                            </div>
                            <div class="card">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-3">
                                            <input type="file" id="fileupload" name="file" class="form-control" />
                                        </div>
                                        <div class="col-md-3">
                                            <input type="button" name="Upload" value="Upload" id="btnupload" class="btn btn-primary" />
                                        </div>
                                        <div class="col-md-3">
                                            <input type="button" name="Export" value="Save" id="btnExport" class="btn btn-primary" />
                                        </div>

                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <div class="table-wrapper-scroll-y my-custom-scrollbar">
                                            <div class="pagination">
                                                <div id="divPrint">
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-4">

                                        <div class="alert alert-success alert-dismissible fade show" role="alert">
                                            @if (TempData["PostcustomerFileUploading"] != null)
                                            {<div class="alert alert-success alert-dismissible fade show" role="alert">
                                                    <strong>
                                                        Success
                                                    </strong> @TempData["PostcustomerFileUploading"]
                                                </div>}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="modal modal-colored modal-primary fade" id="AddRider" tabindex="-1" role="dialog" aria-hidden="true">
                        <div class="modal-dialog modal-lg modal-dialog-centered modal-autoheight"
                             style="max-width:90%;  margin-top: 20px; margin-bottom:20px;"
                             role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title">Please select Rider for Basic Plan</h5>
                                </div>
                                <div class="row">
                                    <div class="mb-2 col-md-3">
                                        <button class="btn btn-success" type="button"
                                                name="btnAddRider" id="btnAddRider">
                                            Add Rider
                                        </button>
                                    </div>
                                    <div class="col-10 col-md-11 col-lg-11" style="overflow-x: auto; margin-left: 25px; margin-right:15px">
                                        <table @*class="table table-responsive table-striped table-bordered table-hover"*@ class="table table-bordered"
                                               id="TableIdRider" style="width:100%;"
                                               align="center">
                                            <tr>
                                                <td class="text-white" style="font-weight: bold; text-align: left;">Rider Code</td>
                                                <td class="text-white" style="font-weight: bold; text-align: left;">Rider Name</td>
                                                <td class="text-white" style="font-weight: bold; text-align: left;">Event Covered</td>
                                                <td class="text-white" style="font-weight: bold; text-align: left;">Start Date</td>
                                                <td class="text-white" style="font-weight: bold; text-align: left;">End Date</td>
                                                <td class="text-white" style="font-weight: bold; text-align: left;">Frequency</td>
                                                <td class="text-white" style="font-weight: bold; text-align: left;">Paybale</td>
                                                <td class="text-white" style="font-weight: bold; text-align: left;">Loading Type</td>
                                                <td class="text-white" style="font-weight: bold; text-align: left;">Loading Value</td>
                                                <td class="text-white" style="font-weight: bold; text-align: left;">Rider Cont</td>
                                                <td class="text-white" style="font-weight: bold; text-align: left;">Net Cont</td>
                                                <td class="text-white" style="font-weight: bold; text-align: left;">Status</td>
                                            </tr>
                                        </table>

                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                    <button type="button" class="btn btn-primary" id="SaveQuotaRider">Save changes</button>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="modal modal-colored modal-primary fade" id="AddEvent" tabindex="-1" role="dialog" aria-hidden="true">
                        <div class="modal-dialog modal-lg modal-dialog-centered modal-autoheight"
                             style="overflow-X: scroll; max-width:90%;  margin-top: 20px; margin-bottom:20px;"
                             role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title">Please select Event for Basic Plan</h5>
                                </div>
                                <div class="row">
                                    <div class="mb-2 col-md-3">
                                        <button class="btn btn-success" type="button"
                                                name="btnAddEvent" id="btnAddEvent">
                                            Add Event
                                        </button>
                                    </div>
                                </div>
                                <div class="row">

                                    <div class="col-10 col-md-11 col-lg-12" style="overflow-x:auto;margin-left: 25px; margin-right:15px">
                                        <table @*class="table table-responsive table-striped table-bordered table-hover"*@ class="table table-bordered"
                                               id="TableIdEvent" style="width:80%;"
                                               align="center">
                                            <tr>
                                                <td class="text-white" style="font-weight: bold; text-align: left;">Event Code</td>
                                                @*<td class="text-white" style="font-weight: bold; text-align: left; width: 100px">Event Name</td>*@
                                                <td class="text-white" style="font-weight: bold; text-align: left;">Start Date</td>
                                                <td class="text-white" style="font-weight: bold; text-align: left;">End Date</td>
                                                <td class="text-white" style="font-weight: bold; text-align: left;">Frequency</td>
                                                <td class="text-white" style="font-weight: bold; text-align: left;">Paybale</td>
                                                <td class="text-white" style="font-weight: bold; text-align: left;">Event Contrib</td>
                                                <td class="text-white" style="font-weight: bold; text-align: left;">Event Loading</td>
                                                <td class="text-white" style="font-weight: bold; text-align: left;">Net Cont</td>
                                                <td class="text-white" style="font-weight: bold; text-align: left;">Status</td>
                                            </tr>
                                        </table>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        <button type="button" class="btn btn-primary" id="SaveQuotaEvent" onclick="SaveQuotaEvent">Save changes</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="spinner-box" hidden>
        <img src="/Assets/img/photos/loader_img.gif" id="loaderImage" />
        <div id="loader_text" class="text-white pt-2 text-center">Please wait...While Quotation Data is being Loaded!</div>
    </div>

    <div id="saving_spinner" hidden>
        <img src="/Assets/img/photos/loader_img.gif" id="loaderImage" />
        <div id="loader_text" class="text-white pt-2 text-center">Please wait...While Quotation is being Generated!</div>
    </div>
</form>
